(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b9e859a"],{"0cc8":function(t,e,n){"use strict";n("8b7e")},1148:function(t,e,n){"use strict";var r=n("5926"),i=n("577e"),o=n("1d80");t.exports=function(t){var e=i(o(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},"139b":function(t,e,n){},"13ce":function(t,e,n){"use strict";n("6103")},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),a=n("17c2"),c=n("9112"),u=function(t){if(t&&t.forEach!==a)try{c(t,"forEach",a)}catch(e){t.forEach=a}};for(var s in i)i[s]&&u(r[s]&&r[s].prototype);u(o)},1604:function(t,e,n){},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"18e8":function(t,e,n){},"220b":function(t,e,n){},"2a2e":function(t,e,n){},"2cb4":function(t,e,n){"use strict";n("5788")},"408a":function(t,e){var n=1..valueOf;t.exports=function(t){return n.call(t)}},4699:function(t,e,n){"use strict";n("1604")},"4d6c":function(t,e,n){"use strict";n("50e8")},"4fad":function(t,e,n){var r=n("23e7"),i=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"50e8":function(t,e,n){},5788:function(t,e,n){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("577e"),o=n("5899"),a="["+o+"]",c=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),s=function(t){return function(e){var n=i(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(u,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},5977:function(t,e,n){"use strict";n("18e8")},6103:function(t,e,n){},"6f53":function(t,e,n){var r=n("83ab"),i=n("df75"),o=n("fc6a"),a=n("d1e7").f,c=function(t){return function(e){var n,c=o(e),u=i(c),s=u.length,l=0,f=[];while(s>l)n=u[l++],r&&!a.call(c,n)||f.push(t?[n,c[n]]:c[n]);return f}};t.exports={entries:c(!0),values:c(!1)}},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("07fa");t.exports=function(t){var e=r(this),n=o(e),a=arguments.length,c=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,s=void 0===u?n:i(u,n);while(s>c)e[c++]=t;return e}},"8b7e":function(t,e,n){},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),a=n("861d"),c=n("7b0b"),u=n("07fa"),s=n("8418"),l=n("65f0"),f=n("1dde"),h=n("b622"),d=n("2d00"),b=h("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",m=d>=51||!i((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),v=f("concat"),_=function(t){if(!a(t))return!1;var e=t[b];return void 0!==e?!!e:o(t)},y=!m||!v;r({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,r,i,o,a=c(this),f=l(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],_(o)){if(i=u(o),h+i>p)throw TypeError(g);for(n=0;n<i;n++,h++)n in o&&s(f,h,o[n])}else{if(h>=p)throw TypeError(g);s(f,h++,o)}return f.length=h,f}})},a15b:function(t,e,n){"use strict";var r=n("23e7"),i=n("44ad"),o=n("fc6a"),a=n("a640"),c=[].join,u=i!=Object,s=a("join",",");r({target:"Array",proto:!0,forced:u||!s},{join:function(t){return c.call(o(this),void 0===t?",":t)}})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("94ca"),a=n("6eeb"),c=n("1a2d"),u=n("7156"),s=n("d9b5"),l=n("c04e"),f=n("d039"),h=n("241c").f,d=n("06cf").f,b=n("9bf2").f,p=n("408a"),g=n("58a8").trim,m="Number",v=i[m],_=v.prototype,y=function(t){var e=l(t,"number");return"bigint"===typeof e?e:O(e)},O=function(t){var e,n,r,i,o,a,c,u,f=l(t,"number");if(s(f))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof f&&f.length>2)if(f=g(f),e=f.charCodeAt(0),43===e||45===e){if(n=f.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+f}for(o=f.slice(2),a=o.length,c=0;c<a;c++)if(u=o.charCodeAt(c),u<48||u>i)return NaN;return parseInt(o,r)}return+f};if(o(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var j,w=function(t){var e=arguments.length<1?0:v(y(t)),n=this;return n instanceof w&&f((function(){p(n)}))?u(Object(e),n,w):e},x=r?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;x.length>A;A++)c(v,j=x[A])&&!c(w,j)&&b(w,j,d(v,j));w.prototype=_,_.constructor=w,a(i,m,w)}},ab0d:function(t,e,n){"use strict";n.r(e);n("b0c0"),n("a4d3"),n("e01a");var r=n("7a23"),i=function(t){return Object(r["x"])("data-v-3daf3e40"),t=t(),Object(r["v"])(),t},o=i((function(){return Object(r["g"])("i",{class:"fa-solid fa-file-arrow-up"},null,-1)})),a=[o],c={class:"modal-backdrop"},u={class:"rounded"},s={class:"modal-header"},l=i((function(){return Object(r["g"])("div",{name:"header"}," Upload JSON results ",-1)})),f=i((function(){return Object(r["g"])("i",{class:"fas fa-close"},null,-1)})),h=[f],d={class:"modal-body"},b={class:"search-wrapper",id:"upload"},p={class:"modal-footer"};function g(t,e,n,i,o,f){var g=Object(r["B"])("Summary"),m=Object(r["B"])("Comparison"),v=Object(r["B"])("Solution"),_=Object(r["B"])("Alert");return Object(r["u"])(),Object(r["f"])("div",null,[Object(r["g"])("button",{type:"button",class:"floating-button",title:"Upload JSON result",onClick:e[0]||(e[0]=function(){return f.show_modal&&f.show_modal.apply(f,arguments)})},a),Object(r["L"])(Object(r["g"])("div",c,[Object(r["g"])("div",u,[Object(r["g"])("header",s,[l,Object(r["g"])("button",{type:"button",class:"btn-close",title:"Close modal",onClick:e[1]||(e[1]=function(){return f.close_modal&&f.close_modal.apply(f,arguments)})},h)]),Object(r["g"])("section",d,[Object(r["g"])("div",b,[Object(r["g"])("input",{type:"file",accept:"application/json",onChange:e[2]||(e[2]=function(){return f.onFileChange&&f.onFileChange.apply(f,arguments)})},null,32)])]),Object(r["g"])("footer",p,[Object(r["g"])("button",{type:"button",class:"button button-green",onClick:e[3]||(e[3]=function(){f.update_json()&&f.close_modal()})}," Load JSON ")])])],512),[[r["I"],t.show_upload_dialog]]),Object(r["j"])(g,{name:t.json.name+", "+t.json.description,results:t.json.results,sequence:t.json.sequence,summarydata:f.summary_data,is_corsid_a:t.json.is_corsid_a,leader_end:t.json.ORF1ab[0],onAddSolution:e[4]||(e[4]=function(t){return f.add_solution(t)}),onShowAsCompare:e[5]||(e[5]=function(t){return f.show_as_compare(t)}),onNoSolution:e[6]||(e[6]=function(e){t.alert_message="No solution for window ".concat(e)}),ref:"Summary"},null,8,["name","results","sequence","summarydata","is_corsid_a","leader_end"]),t.staticIdx>-1?(Object(r["u"])(),Object(r["d"])(m,{key:t.json.results[t.staticIdx],res:[t.staticIdx,t.json.results[t.staticIdx]],name:t.json.name,header:t.header,reverse_bodys:f.reverse_bodys[t.staticIdx],intervals:f.intervals[t.staticIdx],sequences:f.sequences[t.staticIdx],box:f.boxes[t.staticIdx],is_corsid_a:t.json.is_corsid_a,onRemoveComparison:e[7]||(e[7]=function(t){return f.remove_comparison()})},null,8,["res","name","header","reverse_bodys","intervals","sequences","box","is_corsid_a"])):Object(r["e"])("",!0),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(t.solutions_shown,(function(n,i){return Object(r["u"])(),Object(r["d"])(v,{key:i,res:n,name:t.json.name,header:t.header,reverse_bodys:f.reverse_bodys[n[0]],intervals:f.intervals[n[0]],sequences:f.sequences[n[0]],box:f.boxes[n[0]],full_sequence:t.json.sequence,is_corsid_a:t.json.is_corsid_a,onWriteToJson:e[8]||(e[8]=function(t){return f.write_to_json(t)}),onRemoveSolution:e[9]||(e[9]=function(t){return f.remove_solution(t)}),onMoveUp:e[10]||(e[10]=function(t){return f.move_up(t)}),onMoveDown:e[11]||(e[11]=function(t){return f.move_down(t)})},null,8,["res","name","header","reverse_bodys","intervals","sequences","box","full_sequence","is_corsid_a"])})),128)),Object(r["j"])(_,{message:t.alert_message,style:"warning"},null,8,["message"])])}n("d3b7"),n("4de4"),n("a630"),n("3ca3"),n("99af"),n("fb6a"),n("ac1f"),n("00b4"),n("4e82"),n("b680");var m=function(t){return Object(r["x"])("data-v-6403a8e6"),t=t(),Object(r["v"])(),t},v={class:"summary"},_={class:"summary-table-header"},y=Object(r["i"])(" Position "),O=m((function(){return Object(r["g"])("th",{id:"core_seq",title:"Core sequence"},"Core Sequence",-1)})),j=["title"],w=Object(r["i"])(" Rank "),x=Object(r["i"])(" TRS-L "),A=Object(r["i"])(" Coverage "),k=Object(r["i"])(" Weight "),T=Object(r["i"])(" Score "),C=Object(r["i"])(" Min Score "),S=m((function(){return Object(r["g"])("th",{id:"plot",title:"Add a solution to the top"},"Add",-1)})),M=m((function(){return Object(r["g"])("th",{id:"compare",title:"Pin a solution below to compare"},"Compare",-1)})),R={class:"aligned"},F={key:0},N={key:1},E={key:2},D=["onClick"],q=m((function(){return Object(r["g"])("i",{class:"fas fa-plus"},null,-1)})),I=[q],G=["onClick"],P=m((function(){return Object(r["g"])("i",{class:"fas fa-thumbtack"},null,-1)})),L=[P],z={class:"paging"},B={class:"label"},X={class:"paging-group"},V=m((function(){return Object(r["g"])("i",{class:"fas fa-angle-double-left"},null,-1)})),$=[V],H=m((function(){return Object(r["g"])("i",{class:"fas fa-angle-left"},null,-1)})),Y=[H],U=m((function(){return Object(r["g"])("i",{class:"fas fa-angle-right"},null,-1)})),J=[U],K=m((function(){return Object(r["g"])("i",{class:"fas fa-angle-double-right"},null,-1)})),W=[K];function Z(t,e,n,i,o,a){var c=this,u=Object(r["B"])("Slider"),s=Object(r["B"])("percentage");return Object(r["u"])(),Object(r["f"])("div",v,[Object(r["g"])("h2",{onClick:e[0]||(e[0]=function(){return t.test&&t.test.apply(t,arguments)})},Object(r["D"])(n.name),1),Object(r["j"])(u,{sequence:n.sequence.slice(0,n.leader_end),default_pos:a.sortedSummaryData[0].pos,onAdd:a.add,onJump:a.jump},null,8,["sequence","default_pos","onAdd","onJump"]),Object(r["g"])("table",null,[Object(r["g"])("thead",null,[Object(r["g"])("tr",_,[Object(r["g"])("th",{id:"pos",onClick:e[1]||(e[1]=function(t){return a.sort("pos")})},[y,Object(r["g"])("i",{class:Object(r["p"])("pos"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)]),O,Object(r["g"])("th",{id:"idx",onClick:e[2]||(e[2]=function(t){return a.sort("idx")}),title:n.is_corsid_a?"Ranked by `Weight`":"Ranked by (Coverage, Score, Min-Score) lexicographically"},[w,Object(r["g"])("i",{class:Object(r["p"])("idx"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)],8,j),Object(r["g"])("th",{id:"trs_l_start",onClick:e[3]||(e[3]=function(t){return a.sort("trs_l_start")}),title:"TRS-L range"},[x,Object(r["g"])("i",{class:Object(r["p"])("trs_l_start"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)]),Object(r["g"])("th",{id:"compact",onClick:e[4]||(e[4]=function(t){return a.sort("compact")}),title:"Genome coveraged by identified ORFs"},[A,Object(r["g"])("i",{class:Object(r["p"])("compact"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)]),n.is_corsid_a?(Object(r["u"])(),Object(r["f"])("th",{key:0,id:"weight",onClick:e[5]||(e[5]=function(t){return a.sort("weight")}),title:"Total alignment score"},[k,Object(r["g"])("i",{class:Object(r["p"])("weight"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)])):(Object(r["u"])(),Object(r["f"])("th",{key:1,id:"score",onClick:e[6]||(e[6]=function(t){return a.sort("score")}),title:"Total alignment score"},[T,Object(r["g"])("i",{class:Object(r["p"])("score"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)])),n.is_corsid_a?Object(r["e"])("",!0):(Object(r["u"])(),Object(r["f"])("th",{key:2,id:"min_score",onClick:e[7]||(e[7]=function(t){return a.sort("min_score")}),title:"Minimum alignment score of an ORF in the solution"},[C,Object(r["g"])("i",{class:Object(r["p"])("min_score"===o.currentSort?a.class_sorted:"fas fa-sort dim")},null,2)])),S,M])]),Object(r["g"])("tbody",null,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(a.sortedSummaryData.slice(o.idxShown,o.idxShown+10),(function(e){return Object(r["u"])(),Object(r["f"])("tr",{key:e.idx},[Object(r["g"])("td",null,Object(r["D"])(e.pos),1),Object(r["g"])("td",R,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(e.core_seq,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))]),Object(r["g"])("td",null,Object(r["D"])(e.idx),1),Object(r["g"])("td",null,Object(r["D"])(e.trs_l_start)+" - "+Object(r["D"])(e.trs_l_end),1),Object(r["j"])(s,{percentage:a.percentage,percentage_number:e.compact},null,8,["percentage","percentage_number"]),n.is_corsid_a?(Object(r["u"])(),Object(r["f"])("td",F,Object(r["D"])(parseFloat(e.weight).toFixed(0)),1)):(Object(r["u"])(),Object(r["f"])("td",N,Object(r["D"])(e.score),1)),n.is_corsid_a?Object(r["e"])("",!0):(Object(r["u"])(),Object(r["f"])("td",E,Object(r["D"])(e.min_score),1)),Object(r["g"])("td",null,[Object(r["g"])("button",{id:"add_solution_card",onClick:function(r){return t.$emit("add-solution",[e.idx-1,n.results[e.idx-1]])}},I,8,D)]),Object(r["g"])("td",null,[Object(r["g"])("button",{onClick:function(n){return t.$emit("show-as-compare",e.idx)}},L,8,G)])])})),128))])]),Object(r["g"])("div",z,[Object(r["g"])("div",B,Object(r["D"])("Showing ".concat(o.idxShown+1," -\n          ").concat(o.idxShown+10>n.summarydata.length?n.summarydata.length:o.idxShown+10,"\n          of ").concat(n.summarydata.length)),1),Object(r["g"])("div",X,[Object(r["g"])("div",{class:"button",onClick:e[8]||(e[8]=function(t){return a.jumpto(0)})},$),Object(r["g"])("div",{class:"button",onClick:e[9]||(e[9]=function(){return a.sub_idx_shown&&a.sub_idx_shown.apply(a,arguments)})},Y),Object(r["L"])(Object(r["g"])("input",{type:"text",onKeyup:e[10]||(e[10]=Object(r["M"])((function(t){return a.jumpto(parseInt(c.idxJump-1))}),["enter"])),"onUpdate:modelValue":e[11]||(e[11]=function(t){return o.idxJump=t}),placeholder:"position"},null,544),[[r["H"],o.idxJump]]),Object(r["g"])("div",{class:"button",onClick:e[12]||(e[12]=function(){return a.add_idx_shown&&a.add_idx_shown.apply(a,arguments)})},J),Object(r["g"])("div",{class:"button",onClick:e[13]||(e[13]=function(t){return a.jumpto(n.summarydata.length-10)})},W)])])])}n("a9e3"),n("c740");function Q(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function tt(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function et(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);while(++r<i)o[r]=t+r*n;return o}var nt=function(t){return t},rt=1,it=2,ot=3,at=4,ct=1e-6;function ut(t){return"translate("+t+",0)"}function st(t){return"translate(0,"+t+")"}function lt(t){return e=>+t(e)}function ft(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ht(){return!this.__axis}function dt(t,e){var n=[],r=null,i=null,o=6,a=6,c=3,u="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,s=t===rt||t===at?-1:1,l=t===at||t===it?"x":"y",f=t===rt||t===ot?ut:st;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,b=null==i?e.tickFormat?e.tickFormat.apply(e,n):nt:i,p=Math.max(o,0)+c,g=e.range(),m=+g[0]+u,v=+g[g.length-1]+u,_=(e.bandwidth?ft:lt)(e.copy(),u),y=h.selection?h.selection():h,O=y.selectAll(".domain").data([null]),j=y.selectAll(".tick").data(d,e).order(),w=j.exit(),x=j.enter().append("g").attr("class","tick"),A=j.select("line"),k=j.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),j=j.merge(x),A=A.merge(x.append("line").attr("stroke","currentColor").attr(l+"2",s*o)),k=k.merge(x.append("text").attr("fill","currentColor").attr(l,s*p).attr("dy",t===rt?"0em":t===ot?"0.71em":"0.32em")),h!==y&&(O=O.transition(h),j=j.transition(h),A=A.transition(h),k=k.transition(h),w=w.transition(h).attr("opacity",ct).attr("transform",(function(t){return isFinite(t=_(t))?f(t+u):this.getAttribute("transform")})),x.attr("opacity",ct).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:_(t))+u)}))),w.remove(),O.attr("d",t===at||t===it?a?"M"+s*a+","+m+"H"+u+"V"+v+"H"+s*a:"M"+u+","+m+"V"+v:a?"M"+m+","+s*a+"V"+u+"H"+v+"V"+s*a:"M"+m+","+u+"H"+v),j.attr("opacity",1).attr("transform",(function(t){return f(_(t)+u)})),A.attr(l+"2",s*o),k.attr(l,s*p).text(b),y.filter(ht).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===it?"start":t===at?"end":"middle"),y.each((function(){this.__axis=_}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(c=+t,h):c},h.offset=function(t){return arguments.length?(u=+t,h):u},h}function bt(t){return dt(ot,t)}var pt={value:()=>{}};function gt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new mt(r)}function mt(t){this._=t}function vt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function _t(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function yt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=pt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}mt.prototype=gt.prototype={constructor:mt,on:function(t,e){var n,r=this._,i=vt(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<a)if(n=(t=i[o]).type)r[n]=yt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=yt(r[n],t.name,null);return this}while(++o<a)if((n=(t=i[o]).type)&&(n=_t(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new mt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Ot=gt;function jt(){}var wt=function(t){return null==t?jt:function(){return this.querySelector(t)}},xt=function(t){"function"!==typeof t&&(t=wt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,c=e[i],u=c.length,s=r[i]=new Array(u),l=0;l<u;++l)(o=c[l])&&(a=t.call(o,o.__data__,l,c))&&("__data__"in o&&(a.__data__=o.__data__),s[l]=a);return new _n(r,this._parents)};function At(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function kt(){return[]}var Tt=function(t){return null==t?kt:function(){return this.querySelectorAll(t)}};function Ct(t){return function(){return At(t.apply(this,arguments))}}var St=function(t){t="function"===typeof t?Ct(t):Tt(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,c=e[o],u=c.length,s=0;s<u;++s)(a=c[s])&&(r.push(t.call(a,a.__data__,s,c)),i.push(a));return new _n(r,i)},Mt=function(t){return function(){return this.matches(t)}};function Rt(t){return function(e){return e.matches(t)}}var Ft=Array.prototype.find;function Nt(t){return function(){return Ft.call(this.children,t)}}function Et(){return this.firstElementChild}var Dt=function(t){return this.select(null==t?Et:Nt("function"===typeof t?t:Rt(t)))},qt=Array.prototype.filter;function It(){return Array.from(this.children)}function Gt(t){return function(){return qt.call(this.children,t)}}var Pt=function(t){return this.selectAll(null==t?It:Gt("function"===typeof t?t:Rt(t)))},Lt=function(t){"function"!==typeof t&&(t=Mt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],c=a.length,u=r[i]=[],s=0;s<c;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&u.push(o);return new _n(r,this._parents)},zt=function(t){return new Array(t.length)},Bt=function(){return new _n(this._enter||this._groups.map(zt),this._parents)};function Xt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Xt.prototype={constructor:Xt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Vt=function(t){return function(){return t}};function $t(t,e,n,r,i,o){for(var a,c=0,u=e.length,s=o.length;c<s;++c)(a=e[c])?(a.__data__=o[c],r[c]=a):n[c]=new Xt(t,o[c]);for(;c<u;++c)(a=e[c])&&(i[c]=a)}function Ht(t,e,n,r,i,o,a){var c,u,s,l=new Map,f=e.length,h=o.length,d=new Array(f);for(c=0;c<f;++c)(u=e[c])&&(d[c]=s=a.call(u,u.__data__,c,e)+"",l.has(s)?i[c]=u:l.set(s,u));for(c=0;c<h;++c)s=a.call(t,o[c],c,o)+"",(u=l.get(s))?(r[c]=u,u.__data__=o[c],l.delete(s)):n[c]=new Xt(t,o[c]);for(c=0;c<f;++c)(u=e[c])&&l.get(d[c])===u&&(i[c]=u)}function Yt(t){return t.__data__}var Ut=function(t,e){if(!arguments.length)return Array.from(this,Yt);var n=e?Ht:$t,r=this._parents,i=this._groups;"function"!==typeof t&&(t=Vt(t));for(var o=i.length,a=new Array(o),c=new Array(o),u=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,d=Jt(t.call(l,l&&l.__data__,s,r)),b=d.length,p=c[s]=new Array(b),g=a[s]=new Array(b),m=u[s]=new Array(h);n(l,f,p,g,m,d,e);for(var v,_,y=0,O=0;y<b;++y)if(v=p[y]){y>=O&&(O=y+1);while(!(_=g[O])&&++O<b);v._next=_||null}}return a=new _n(a,r),a._enter=c,a._exit=u,a};function Jt(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}var Kt=function(){return new _n(this._exit||this._groups.map(zt),this._parents)},Wt=function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof t?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),null!=e&&(i=e(i),i&&(i=i.selection())),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},Zt=function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),c=new Array(i),u=0;u<a;++u)for(var s,l=n[u],f=r[u],h=l.length,d=c[u]=new Array(h),b=0;b<h;++b)(s=l[b]||f[b])&&(d[b]=s);for(;u<i;++u)c[u]=n[u];return new _n(c,this._parents)},Qt=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},te=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ee);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,c=n[o],u=c.length,s=i[o]=new Array(u),l=0;l<u;++l)(a=c[l])&&(s[l]=a);s.sort(e)}return new _n(i,this._parents).order()};function ee(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var ne=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},re=function(){return Array.from(this)},ie=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},oe=function(){let t=0;for(const e of this)++t;return t},ae=function(){return!this.node()},ce=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,c=o.length;a<c;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},ue="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:ue,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},le=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),se.hasOwnProperty(e)?{space:se[e],local:t}:t};function fe(t){return function(){this.removeAttribute(t)}}function he(t){return function(){this.removeAttributeNS(t.space,t.local)}}function de(t,e){return function(){this.setAttribute(t,e)}}function be(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ge(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var me=function(t,e){var n=le(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?he:fe:"function"===typeof e?n.local?ge:pe:n.local?be:de)(n,e))},ve=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function _e(t){return function(){this.style.removeProperty(t)}}function ye(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Oe(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}var je=function(t,e,n){return arguments.length>1?this.each((null==e?_e:"function"===typeof e?Oe:ye)(t,e,null==n?"":n)):we(this.node(),t)};function we(t,e){return t.style.getPropertyValue(e)||ve(t).getComputedStyle(t,null).getPropertyValue(e)}function xe(t){return function(){delete this[t]}}function Ae(t,e){return function(){this[t]=e}}function ke(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}var Te=function(t,e){return arguments.length>1?this.each((null==e?xe:"function"===typeof e?ke:Ae)(t,e)):this.node()[t]};function Ce(t){return t.trim().split(/^|\s+/)}function Se(t){return t.classList||new Me(t)}function Me(t){this._node=t,this._names=Ce(t.getAttribute("class")||"")}function Re(t,e){var n=Se(t),r=-1,i=e.length;while(++r<i)n.add(e[r])}function Fe(t,e){var n=Se(t),r=-1,i=e.length;while(++r<i)n.remove(e[r])}function Ne(t){return function(){Re(this,t)}}function Ee(t){return function(){Fe(this,t)}}function De(t,e){return function(){(e.apply(this,arguments)?Re:Fe)(this,t)}}Me.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var qe=function(t,e){var n=Ce(t+"");if(arguments.length<2){var r=Se(this.node()),i=-1,o=n.length;while(++i<o)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?De:e?Ne:Ee)(n,e))};function Ie(){this.textContent=""}function Ge(t){return function(){this.textContent=t}}function Pe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}var Le=function(t){return arguments.length?this.each(null==t?Ie:("function"===typeof t?Pe:Ge)(t)):this.node().textContent};function ze(){this.innerHTML=""}function Be(t){return function(){this.innerHTML=t}}function Xe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}var Ve=function(t){return arguments.length?this.each(null==t?ze:("function"===typeof t?Xe:Be)(t)):this.node().innerHTML};function $e(){this.nextSibling&&this.parentNode.appendChild(this)}var He=function(){return this.each($e)};function Ye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Ue=function(){return this.each(Ye)};function Je(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ue&&e.documentElement.namespaceURI===ue?e.createElement(t):e.createElementNS(n,t)}}function Ke(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var We=function(t){var e=le(t);return(e.local?Ke:Je)(e)},Ze=function(t){var e="function"===typeof t?t:We(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))};function Qe(){return null}var tn=function(t,e){var n="function"===typeof t?t:We(t),r=null==e?Qe:"function"===typeof e?e:wt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))};function en(){var t=this.parentNode;t&&t.removeChild(this)}var nn=function(){return this.each(en)};function rn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function on(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var an=function(t){return this.select(t?on:rn)},cn=function(t){return arguments.length?this.property("__data__",t):this.node().__data__};function un(t){return function(e){t.call(this,e,this.__data__)}}function sn(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ln(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function fn(t,e,n){return function(){var r,i=this.__on,o=un(e);if(i)for(var a=0,c=i.length;a<c;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}var hn=function(t,e,n){var r,i,o=sn(t+""),a=o.length;if(!(arguments.length<2)){for(c=e?fn:ln,r=0;r<a;++r)this.each(c(o[r],e,n));return this}var c=this.node().__on;if(c)for(var u,s=0,l=c.length;s<l;++s)for(r=0,u=c[s];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value};function dn(t,e,n){var r=ve(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function bn(t,e){return function(){return dn(this,t,e)}}function pn(t,e){return function(){return dn(this,t,e.apply(this,arguments))}}var gn=function(t,e){return this.each(("function"===typeof e?pn:bn)(t,e))},mn=function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)},vn=[null];function _n(t,e){this._groups=t,this._parents=e}function yn(){return new _n([[document.documentElement]],vn)}function On(){return this}_n.prototype=yn.prototype={constructor:_n,select:xt,selectAll:St,selectChild:Dt,selectChildren:Pt,filter:Lt,data:Ut,enter:Bt,exit:Kt,join:Wt,merge:Zt,selection:On,order:Qt,sort:te,call:ne,nodes:re,node:ie,size:oe,empty:ae,each:ce,attr:me,style:je,property:Te,classed:qe,text:Le,html:Ve,raise:He,lower:Ue,append:Ze,insert:tn,remove:nn,clone:an,datum:cn,on:hn,dispatch:gn,[Symbol.iterator]:mn};var jn=yn,wn=function(t){return"string"===typeof t?new _n([[document.querySelector(t)]],[document.documentElement]):new _n([[t]],vn)};const xn={capture:!0,passive:!1};var An=function(t){t.preventDefault(),t.stopImmediatePropagation()},kn=function(t){var e=t.document.documentElement,n=wn(t).on("dragstart.drag",An,xn);"onselectstart"in e?n.on("selectstart.drag",An,xn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Tn(t,e){var n=t.document.documentElement,r=wn(t).on("dragstart.drag",null);e&&(r.on("click.drag",An,xn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Cn=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Sn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Mn(){}var Rn=.7,Fn=1/Rn,Nn="\\s*([+-]?\\d+)\\s*",En="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qn=/^#([0-9a-f]{3,8})$/,In=new RegExp("^rgb\\("+[Nn,Nn,Nn]+"\\)$"),Gn=new RegExp("^rgb\\("+[Dn,Dn,Dn]+"\\)$"),Pn=new RegExp("^rgba\\("+[Nn,Nn,Nn,En]+"\\)$"),Ln=new RegExp("^rgba\\("+[Dn,Dn,Dn,En]+"\\)$"),zn=new RegExp("^hsl\\("+[En,Dn,Dn]+"\\)$"),Bn=new RegExp("^hsla\\("+[En,Dn,Dn,En]+"\\)$"),Xn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Vn(){return this.rgb().formatHex()}function $n(){return rr(this).formatHsl()}function Hn(){return this.rgb().formatRgb()}function Yn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=qn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Un(e):3===n?new Zn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Jn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Jn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=In.exec(t))?new Zn(e[1],e[2],e[3],1):(e=Gn.exec(t))?new Zn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pn.exec(t))?Jn(e[1],e[2],e[3],e[4]):(e=Ln.exec(t))?Jn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=zn.exec(t))?nr(e[1],e[2]/100,e[3]/100,1):(e=Bn.exec(t))?nr(e[1],e[2]/100,e[3]/100,e[4]):Xn.hasOwnProperty(t)?Un(Xn[t]):"transparent"===t?new Zn(NaN,NaN,NaN,0):null}function Un(t){return new Zn(t>>16&255,t>>8&255,255&t,1)}function Jn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zn(t,e,n,r)}function Kn(t){return t instanceof Mn||(t=Yn(t)),t?(t=t.rgb(),new Zn(t.r,t.g,t.b,t.opacity)):new Zn}function Wn(t,e,n,r){return 1===arguments.length?Kn(t):new Zn(t,e,n,null==r?1:r)}function Zn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Qn(){return"#"+er(this.r)+er(this.g)+er(this.b)}function tr(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function er(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function nr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new or(t,e,n,r)}function rr(t){if(t instanceof or)return new or(t.h,t.s,t.l,t.opacity);if(t instanceof Mn||(t=Yn(t)),!t)return new or;if(t instanceof or)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,c=o-i,u=(o+i)/2;return c?(a=e===o?(n-r)/c+6*(n<r):n===o?(r-e)/c+2:(e-n)/c+4,c/=u<.5?o+i:2-o-i,a*=60):c=u>0&&u<1?0:a,new or(a,c,u,t.opacity)}function ir(t,e,n,r){return 1===arguments.length?rr(t):new or(t,e,n,null==r?1:r)}function or(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ar(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function cr(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Cn(Mn,Yn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Vn,formatHex:Vn,formatHsl:$n,formatRgb:Hn,toString:Hn}),Cn(Zn,Wn,Sn(Mn,{brighter:function(t){return t=null==t?Fn:Math.pow(Fn,t),new Zn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Rn:Math.pow(Rn,t),new Zn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qn,formatHex:Qn,formatRgb:tr,toString:tr})),Cn(or,ir,Sn(Mn,{brighter:function(t){return t=null==t?Fn:Math.pow(Fn,t),new or(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Rn:Math.pow(Rn,t),new or(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zn(ar(t>=240?t-240:t+120,i,r),ar(t,i,r),ar(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ur=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,c=r<e-1?t[r+2]:2*o-i;return cr((n-r/e)*e,a,i,o,c)}},sr=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],c=t[(r+2)%e];return cr((n-r/e)*e,i,o,a,c)}},lr=t=>()=>t;function fr(t,e){return function(n){return t+n*e}}function hr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function dr(t){return 1===(t=+t)?br:function(e,n){return n-e?hr(e,n,t):lr(isNaN(e)?n:e)}}function br(t,e){var n=e-t;return n?fr(t,n):lr(isNaN(t)?e:t)}var pr=function t(e){var n=dr(e);function r(t,e){var r=n((t=Wn(t)).r,(e=Wn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=br(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function gr(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),c=new Array(i);for(n=0;n<i;++n)r=Wn(e[n]),o[n]=r.r||0,a[n]=r.g||0,c[n]=r.b||0;return o=t(o),a=t(a),c=t(c),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=c(t),r+""}}}gr(ur),gr(sr);var mr=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function vr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _r(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Mr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var yr=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Or=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},jr=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Mr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xr=new RegExp(wr.source,"g");function Ar(t){return function(){return t}}function kr(t){return function(e){return t(e)+""}}var Tr,Cr,Sr=function(t,e){var n,r,i,o=wr.lastIndex=xr.lastIndex=0,a=-1,c=[],u=[];t+="",e+="";while((n=wr.exec(t))&&(r=xr.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),c[a]?c[a]+=i:c[++a]=i),(n=n[0])===(r=r[0])?c[a]?c[a]+=r:c[++a]=r:(c[++a]=null,u.push({i:a,x:Or(n,r)})),o=xr.lastIndex;return o<e.length&&(i=e.slice(o),c[a]?c[a]+=i:c[++a]=i),c.length<2?u[0]?kr(u[0].x):Ar(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)c[(n=u[r]).i]=n.x(t);return c.join("")})},Mr=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?lr(e):("number"===r?Or:"string"===r?(n=Yn(e))?(e=n,pr):Sr:e instanceof Yn?pr:e instanceof Date?yr:vr(e)?mr:Array.isArray(e)?_r:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?jr:Or)(t,e)},Rr=function(t){let e;while(e=t.sourceEvent)t=e;return t},Fr=function(t,e){if(t=Rr(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]},Nr=0,Er=0,Dr=0,qr=1e3,Ir=0,Gr=0,Pr=0,Lr="object"===typeof performance&&performance.now?performance:Date,zr="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Br(){return Gr||(zr(Xr),Gr=Lr.now()+Pr)}function Xr(){Gr=0}function Vr(){this._call=this._time=this._next=null}function $r(t,e,n){var r=new Vr;return r.restart(t,e,n),r}function Hr(){Br(),++Nr;var t,e=Tr;while(e)(t=Gr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nr}function Yr(){Gr=(Ir=Lr.now())+Pr,Nr=Er=0;try{Hr()}finally{Nr=0,Jr(),Gr=0}}function Ur(){var t=Lr.now(),e=t-Ir;e>qr&&(Pr-=e,Ir=t)}function Jr(){var t,e,n=Tr,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Tr=e);Cr=t,Kr(r)}function Kr(t){if(!Nr){Er&&(Er=clearTimeout(Er));var e=t-Gr;e>24?(t<1/0&&(Er=setTimeout(Yr,t-Lr.now()-Pr)),Dr&&(Dr=clearInterval(Dr))):(Dr||(Ir=Lr.now(),Dr=setInterval(Ur,qr)),Nr=1,zr(Yr))}}Vr.prototype=$r.prototype={constructor:Vr,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Br():+n)+(null==e?0:+e),this._next||Cr===this||(Cr?Cr._next=this:Tr=this,Cr=this),this._call=t,this._time=n,Kr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kr())}};var Wr=function(t,e,n){var r=new Vr;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r},Zr=Ot("start","end","cancel","interrupt"),Qr=[],ti=0,ei=1,ni=2,ri=3,ii=4,oi=5,ai=6,ci=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};fi(t,n,{name:e,index:r,group:i,on:Zr,tween:Qr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ti})};function ui(t,e){var n=li(t,e);if(n.state>ti)throw new Error("too late; already scheduled");return n}function si(t,e){var n=li(t,e);if(n.state>ri)throw new Error("too late; already running");return n}function li(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fi(t,e,n){var r,i=t.__transition;function o(t){n.state=ei,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var s,l,f,h;if(n.state!==ei)return u();for(s in i)if(h=i[s],h.name===n.name){if(h.state===ri)return Wr(a);h.state===ii?(h.state=ai,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<e&&(h.state=ai,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(Wr((function(){n.state===ri&&(n.state=ii,n.timer.restart(c,n.delay,n.time),c(o))})),n.state=ni,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ni){for(n.state=ri,r=new Array(f=n.tween.length),s=0,l=-1;s<f;++s)(h=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function c(e){var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=oi,1),o=-1,a=r.length;while(++o<a)r[o].call(t,i);n.state===oi&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=ai,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=$r(o,0,n.time)}var hi,di=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ni&&n.state<oi,n.state=ai,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},bi=function(t){return this.each((function(){di(this,t)}))},pi=180/Math.PI,gi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},mi=function(t,e,n,r,i,o){var a,c,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*pi,skewX:Math.atan(u)*pi,scaleX:a,scaleY:c}};function vi(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gi:mi(e.a,e.b,e.c,e.d,e.e,e.f)}function _i(t){return null==t?gi:(hi||(hi=document.createElementNS("http://www.w3.org/2000/svg","g")),hi.setAttribute("transform",t),(t=hi.transform.baseVal.consolidate())?(t=t.matrix,mi(t.a,t.b,t.c,t.d,t.e,t.f)):gi)}function yi(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,c){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);c.push({i:u-4,x:Or(t,i)},{i:u-2,x:Or(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Or(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function c(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Or(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var c=o.push(i(o)+"scale(",null,",",null,")");a.push({i:c-4,x:Or(t,n)},{i:c-2,x:Or(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),c(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,o=i.length;while(++n<o)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var Oi=yi(vi,"px, ","px)","deg)"),ji=yi(_i,", ",")",")");function wi(t,e){var n,r;return function(){var i=si(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,c=r.length;a<c;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function xi(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=si(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var c={name:e,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===e){i[u]=c;break}u===s&&i.push(c)}o.tween=i}}var Ai=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=li(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?wi:xi)(n,t,e))};function ki(t,e,n){var r=t._id;return t.each((function(){var t=si(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return li(t,r).value[e]}}var Ti=function(t,e){var n;return("number"===typeof e?Or:e instanceof Yn?pr:(n=Yn(e))?(e=n,pr):Sr)(t,e)};function Ci(t){return function(){this.removeAttribute(t)}}function Si(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mi(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Ri(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Fi(t,e,n){var r,i,o;return function(){var a,c,u=n(this);if(null!=u)return a=this.getAttribute(t),c=u+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,u));this.removeAttribute(t)}}function Ni(t,e,n){var r,i,o;return function(){var a,c,u=n(this);if(null!=u)return a=this.getAttributeNS(t.space,t.local),c=u+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}var Ei=function(t,e){var n=le(t),r="transform"===n?ji:Ti;return this.attrTween(t,"function"===typeof e?(n.local?Ni:Fi)(n,r,ki(this,"attr."+t,e)):null==e?(n.local?Si:Ci)(n):(n.local?Ri:Mi)(n,r,e))};function Di(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function qi(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ii(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&qi(t,i)),n}return i._value=e,i}function Gi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Di(t,i)),n}return i._value=e,i}var Pi=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=le(t);return this.tween(n,(r.local?Ii:Gi)(r,e))};function Li(t,e){return function(){ui(this,t).delay=+e.apply(this,arguments)}}function zi(t,e){return e=+e,function(){ui(this,t).delay=e}}var Bi=function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?Li:zi)(e,t)):li(this.node(),e).delay};function Xi(t,e){return function(){si(this,t).duration=+e.apply(this,arguments)}}function Vi(t,e){return e=+e,function(){si(this,t).duration=e}}var $i=function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?Xi:Vi)(e,t)):li(this.node(),e).duration};function Hi(t,e){if("function"!==typeof e)throw new Error;return function(){si(this,t).ease=e}}var Yi=function(t){var e=this._id;return arguments.length?this.each(Hi(e,t)):li(this.node(),e).ease};function Ui(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;si(this,t).ease=n}}var Ji=function(t){if("function"!==typeof t)throw new Error;return this.each(Ui(this._id,t))},Ki=function(t){"function"!==typeof t&&(t=Mt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],c=a.length,u=r[i]=[],s=0;s<c;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&u.push(o);return new ko(r,this._parents,this._name,this._id)},Wi=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),c=0;c<o;++c)for(var u,s=e[c],l=n[c],f=s.length,h=a[c]=new Array(f),d=0;d<f;++d)(u=s[d]||l[d])&&(h[d]=u);for(;c<r;++c)a[c]=e[c];return new ko(a,this._parents,this._name,this._id)};function Zi(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function Qi(t,e,n){var r,i,o=Zi(e)?ui:si;return function(){var a=o(this,t),c=a.on;c!==r&&(i=(r=c).copy()).on(e,n),a.on=i}}var to=function(t,e){var n=this._id;return arguments.length<2?li(this.node(),n).on.on(t):this.each(Qi(n,t,e))};function eo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}var no=function(){return this.on("end.remove",eo(this._id))},ro=function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=wt(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var c,u,s=r[a],l=s.length,f=o[a]=new Array(l),h=0;h<l;++h)(c=s[h])&&(u=t.call(c,c.__data__,h,s))&&("__data__"in c&&(u.__data__=c.__data__),f[h]=u,ci(f[h],e,n,h,f,li(c,n)));return new ko(o,this._parents,e,n)},io=function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Tt(t));for(var r=this._groups,i=r.length,o=[],a=[],c=0;c<i;++c)for(var u,s=r[c],l=s.length,f=0;f<l;++f)if(u=s[f]){for(var h,d=t.call(u,u.__data__,f,s),b=li(u,n),p=0,g=d.length;p<g;++p)(h=d[p])&&ci(h,e,n,p,d,b);o.push(d),a.push(u)}return new ko(o,a,e,n)},oo=jn.prototype.constructor,ao=function(){return new oo(this._groups,this._parents)};function co(t,e){var n,r,i;return function(){var o=we(this,t),a=(this.style.removeProperty(t),we(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function uo(t){return function(){this.style.removeProperty(t)}}function so(t,e,n){var r,i,o=n+"";return function(){var a=we(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}function lo(t,e,n){var r,i,o;return function(){var a=we(this,t),c=n(this),u=c+"";return null==c&&(this.style.removeProperty(t),u=c=we(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,c))}}function fo(t,e){var n,r,i,o,a="style."+e,c="end."+a;return function(){var u=si(this,t),s=u.on,l=null==u.value[a]?o||(o=uo(e)):void 0;s===n&&i===l||(r=(n=s).copy()).on(c,i=l),u.on=r}}var ho=function(t,e,n){var r="transform"===(t+="")?Oi:Ti;return null==e?this.styleTween(t,co(t,r)).on("end.style."+t,uo(t)):"function"===typeof e?this.styleTween(t,lo(t,r,ki(this,"style."+t,e))).each(fo(this._id,t)):this.styleTween(t,so(t,r,e),n).on("end.style."+t,null)};function bo(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function po(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&bo(t,o,n)),r}return o._value=e,o}var go=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,po(t,e,null==n?"":n))};function mo(t){return function(){this.textContent=t}}function vo(t){return function(){var e=t(this);this.textContent=null==e?"":e}}var _o=function(t){return this.tween("text","function"===typeof t?vo(ki(this,"text",t)):mo(null==t?"":t+""))};function yo(t){return function(e){this.textContent=t.call(this,e)}}function Oo(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&yo(r)),e}return r._value=t,r}var jo=function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,Oo(t))},wo=function(){for(var t=this._name,e=this._id,n=Co(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,c=r[o],u=c.length,s=0;s<u;++s)if(a=c[s]){var l=li(a,e);ci(a,t,n,s,c,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ko(r,this._parents,t,n)},xo=function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var c={value:a},u={value:function(){0===--i&&o()}};n.each((function(){var n=si(this,r),i=n.on;i!==t&&(e=(t=i).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),n.on=e})),0===i&&o()}))},Ao=0;function ko(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function To(t){return jn().transition(t)}function Co(){return++Ao}var So=jn.prototype;function Mo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}ko.prototype=To.prototype={constructor:ko,select:ro,selectAll:io,selectChild:So.selectChild,selectChildren:So.selectChildren,filter:Ki,merge:Wi,selection:ao,transition:wo,call:So.call,nodes:So.nodes,node:So.node,size:So.size,empty:So.empty,each:So.each,on:to,attr:Ei,attrTween:Pi,style:ho,styleTween:go,text:_o,textTween:jo,remove:no,tween:Ai,delay:Bi,duration:$i,ease:Yi,easeVarying:Ji,end:xo,[Symbol.iterator]:So[Symbol.iterator]};var Ro={time:null,delay:0,duration:250,ease:Mo};function Fo(t,e){var n;while(!(n=t.__transition)||!(n=n[e]))if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}var No=function(t){var e,n;t instanceof ko?(e=t._id,t=t._name):(e=Co(),(n=Ro).time=Br(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,c=r[o],u=c.length,s=0;s<u;++s)(a=c[s])&&ci(a,t,e,s,c,n||Fo(a,e));return new ko(r,this._parents,t,e)};jn.prototype.interrupt=bi,jn.prototype.transition=No;var Eo=t=>()=>t;function Do(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function qo(t){t.stopImmediatePropagation()}var Io=function(t){t.preventDefault(),t.stopImmediatePropagation()},Go={name:"drag"},Po={name:"space"},Lo={name:"handle"},zo={name:"center"};const{abs:Bo,max:Xo,min:Vo}=Math;function $o(t){return[+t[0],+t[1]]}function Ho(t){return[$o(t[0]),$o(t[1])]}var Yo={name:"x",handles:["w","e"].map(ta),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Uo={name:"y",handles:["n","s"].map(ta),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Jo=(["n","w","e","s","nw","ne","sw","se"].map(ta),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),Ko={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Wo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Zo={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Qo={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ta(t){return{type:t}}function ea(t){return!t.ctrlKey&&!t.button}function na(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ra(){return navigator.maxTouchPoints||"ontouchstart"in this}function ia(t){while(!t.__brush)if(!(t=t.parentNode))return;return t.__brush}function oa(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function aa(){return ca(Yo)}function ca(t){var e,n=na,r=ea,i=ra,o=!0,a=Ot("start","brush","end"),c=6;function u(e){var n=e.property("__brush",p).selectAll(".overlay").data([ta("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jo.overlay).merge(n).each((function(){var t=ia(this).extent;wn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([ta("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jo.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Jo[t.type]})),e.each(s).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function s(){var t=wn(this),e=ia(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-c/2:e[0][0]-c/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-c/2:e[0][1]-c/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+c:c})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+c:c}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new f(t,e,n):r}function f(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function h(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,a,c,u,f,h,d,b,p,g,m,v=this,_=n.target.__data__.type,y="selection"===(o&&n.metaKey?_="overlay":_)?Go:o&&n.altKey?zo:Lo,O=t===Uo?null:Zo[_],j=t===Yo?null:Qo[_],w=ia(v),x=w.extent,A=w.selection,k=x[0][0],T=x[0][1],C=x[1][0],S=x[1][1],M=0,R=0,F=O&&j&&o&&n.shiftKey,N=Array.from(n.touches||[n],t=>{const e=t.identifier;return t=Fr(t,v),t.point0=t.slice(),t.identifier=e,t});di(v);var E=l(v,arguments,!0).beforestart();if("overlay"===_){A&&(p=!0);const e=[N[0],N[1]||N[0]];w.selection=A=[[i=t===Uo?k:Vo(e[0][0],e[1][0]),c=t===Yo?T:Vo(e[0][1],e[1][1])],[f=t===Uo?C:Xo(e[0][0],e[1][0]),d=t===Yo?S:Xo(e[0][1],e[1][1])]],N.length>1&&P(n)}else i=A[0][0],c=A[0][1],f=A[1][0],d=A[1][1];a=i,u=c,h=f,b=d;var D=wn(v).attr("pointer-events","none"),q=D.selectAll(".overlay").attr("cursor",Jo[_]);if(n.touches)E.moved=G,E.ended=L;else{var I=wn(n.view).on("mousemove.brush",G,!0).on("mouseup.brush",L,!0);o&&I.on("keydown.brush",z,!0).on("keyup.brush",B,!0),kn(n.view)}s.call(v),E.start(n,y.name)}function G(t){for(const e of t.changedTouches||[t])for(const t of N)t.identifier===e.identifier&&(t.cur=Fr(e,v));if(F&&!g&&!m&&1===N.length){const t=N[0];Bo(t.cur[0]-t[0])>Bo(t.cur[1]-t[1])?m=!0:g=!0}for(const e of N)e.cur&&(e[0]=e.cur[0],e[1]=e.cur[1]);p=!0,Io(t),P(t)}function P(t){const e=N[0],n=e.point0;var r;switch(M=e[0]-n[0],R=e[1]-n[1],y){case Po:case Go:O&&(M=Xo(k-i,Vo(C-f,M)),a=i+M,h=f+M),j&&(R=Xo(T-c,Vo(S-d,R)),u=c+R,b=d+R);break;case Lo:N[1]?(O&&(a=Xo(k,Vo(C,N[0][0])),h=Xo(k,Vo(C,N[1][0])),O=1),j&&(u=Xo(T,Vo(S,N[0][1])),b=Xo(T,Vo(S,N[1][1])),j=1)):(O<0?(M=Xo(k-i,Vo(C-i,M)),a=i+M,h=f):O>0&&(M=Xo(k-f,Vo(C-f,M)),a=i,h=f+M),j<0?(R=Xo(T-c,Vo(S-c,R)),u=c+R,b=d):j>0&&(R=Xo(T-d,Vo(S-d,R)),u=c,b=d+R));break;case zo:O&&(a=Xo(k,Vo(C,i-M*O)),h=Xo(k,Vo(C,f+M*O))),j&&(u=Xo(T,Vo(S,c-R*j)),b=Xo(T,Vo(S,d+R*j)));break}h<a&&(O*=-1,r=i,i=f,f=r,r=a,a=h,h=r,_ in Ko&&q.attr("cursor",Jo[_=Ko[_]])),b<u&&(j*=-1,r=c,c=d,d=r,r=u,u=b,b=r,_ in Wo&&q.attr("cursor",Jo[_=Wo[_]])),w.selection&&(A=w.selection),g&&(a=A[0][0],h=A[1][0]),m&&(u=A[0][1],b=A[1][1]),A[0][0]===a&&A[0][1]===u&&A[1][0]===h&&A[1][1]===b||(w.selection=[[a,u],[h,b]],s.call(v),E.brush(t,y.name))}function L(t){if(qo(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Tn(t.view,p),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),q.attr("cursor",Jo.overlay),w.selection&&(A=w.selection),oa(A)&&(w.selection=null,s.call(v)),E.end(t,y.name)}function z(t){switch(t.keyCode){case 16:F=O&&j;break;case 18:y===Lo&&(O&&(f=h-M*O,i=a+M*O),j&&(d=b-R*j,c=u+R*j),y=zo,P(t));break;case 32:y!==Lo&&y!==zo||(O<0?f=h-M:O>0&&(i=a-M),j<0?d=b-R:j>0&&(c=u-R),y=Po,q.attr("cursor",Jo.selection),P(t));break;default:return}Io(t)}function B(t){switch(t.keyCode){case 16:F&&(g=m=F=!1,P(t));break;case 18:y===zo&&(O<0?f=h:O>0&&(i=a),j<0?d=b:j>0&&(c=u),y=Lo,P(t));break;case 32:y===Po&&(t.altKey?(O&&(f=h-M*O,i=a+M*O),j&&(d=b-R*j,c=u+R*j),y=zo):(O<0?f=h:O>0&&(i=a),j<0?d=b:j>0&&(c=u),y=Lo),q.attr("cursor",Jo[_]),P(t));break;default:return}Io(t)}}function d(t){l(this,arguments).moved(t)}function b(t){l(this,arguments).ended(t)}function p(){var e=this.__brush||{selection:null};return e.extent=Ho(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){l(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){l(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=l(e,arguments),o=r.selection,a=t.input("function"===typeof n?n.apply(this,arguments):n,r.extent),c=Mr(o,a);function u(t){r.selection=1===t&&null===a?null:c(t),s.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,i=arguments,o=e.__brush,a=t.input("function"===typeof n?n.apply(e,i):n,o.extent),c=l(e,i).beforestart();di(e),o.selection=null===a?null:a,s.call(e),c.start(r).brush(r).end(r)}))},u.clear=function(t,e){u.move(t,null,e)},f.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=wn(this.that).datum();a.call(e,this.that,new Do(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},u.extent=function(t){return arguments.length?(n="function"===typeof t?t:Eo(Ho(t)),u):n},u.filter=function(t){return arguments.length?(r="function"===typeof t?t:Eo(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"===typeof t?t:Eo(!!t),u):i},u.handleSize=function(t){return arguments.length?(c=+t,u):c},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}function ua(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}class sa extends Map{constructor(t,e=da){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(la(this,t))}has(t){return super.has(la(this,t))}set(t,e){return super.set(fa(this,t),e)}delete(t){return super.delete(ha(this,t))}}Set;function la({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function fa({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ha({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function da(t){return null!==t&&"object"===typeof t?t.valueOf():t}const ba=Symbol("implicit");function pa(){var t=new sa,e=[],n=[],r=ba;function i(i){let o=t.get(i);if(void 0===o){if(r!==ba)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new sa;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return pa(e,n).unknown(r)},ua.apply(i,arguments),i}function ga(){var t,e,n=pa().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,c=!1,u=0,s=0,l=.5;function f(){var n=r().length,f=a<o,h=f?a:o,d=f?o:a;t=(d-h)/Math.max(1,n-u+2*s),c&&(t=Math.floor(t)),h+=(d-h-t*(n-u))*l,e=t*(1-u),c&&(h=Math.round(h),e=Math.round(e));var b=et(n).map((function(e){return h+t*e}));return i(f?b.reverse():b)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,f()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,c=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(c=!!t,f()):c},n.padding=function(t){return arguments.length?(u=Math.min(1,s=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(s=+t,f()):s},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),f()):l},n.copy=function(){return ga(r(),[o,a]).round(c).paddingInner(u).paddingOuter(s).align(l)},ua.apply(f(),arguments)}var ma=Math.sqrt(50),va=Math.sqrt(10),_a=Math.sqrt(2);function ya(t,e,n){var r,i,o,a,c=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Oa(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);while(++c<i)o[c]=(n+c)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);while(++c<i)o[c]=(n+c)/a}return r&&o.reverse(),o}function Oa(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ma?10:o>=va?5:o>=_a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ma?10:o>=va?5:o>=_a?2:1)}function ja(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ma?i*=10:o>=va?i*=5:o>=_a&&(i*=2),e<t?-i:i}function wa(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xa(t){let e=t,n=t,r=t;function i(t,e,i=0,o=t.length){if(i<o){if(0!==n(e,e))return o;do{const n=i+o>>>1;r(t[n],e)<0?i=n+1:o=n}while(i<o)}return i}function o(t,e,i=0,o=t.length){if(i<o){if(0!==n(e,e))return o;do{const n=i+o>>>1;r(t[n],e)<=0?i=n+1:o=n}while(i<o)}return i}function a(t,n,r=0,o=t.length){const a=i(t,n,r,o-1);return a>r&&e(t[a-1],n)>-e(t[a],n)?a-1:a}return 2!==t.length&&(e=(e,n)=>t(e)-n,n=wa,r=(e,n)=>wa(t(e),n)),{left:i,center:a,right:o}}function Aa(t){return null===t?NaN:+t}const ka=xa(wa),Ta=ka.right;ka.left,xa(Aa).center;var Ca=Ta,Sa=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}};function Ma(t){return function(){return t}}function Ra(t){return+t}var Fa=[0,1];function Na(t){return t}function Ea(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ma(isNaN(e)?NaN:.5)}function Da(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function qa(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ea(i,r),o=n(a,o)):(r=Ea(r,i),o=n(o,a)),function(t){return o(r(t))}}function Ia(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++a<r)i[a]=Ea(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Ca(t,e,1,r)-1;return o[n](i[n](e))}}function Ga(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Pa(){var t,e,n,r,i,o,a=Fa,c=Fa,u=Mr,s=Na;function l(){var t=Math.min(a.length,c.length);return s!==Na&&(s=Da(a[0],a[t-1])),r=t>2?Ia:qa,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),c,u)))(t(s(e)))}return f.invert=function(n){return s(e((o||(o=r(c,a.map(t),Or)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Ra),l()):a.slice()},f.range=function(t){return arguments.length?(c=Array.from(t),l()):c.slice()},f.rangeRound=function(t){return c=Array.from(t),u=Sa,l()},f.clamp=function(t){return arguments.length?(s=!!t||Na,l()):s!==Na},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function La(){return Pa()(Na,Na)}var za=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ba(t){if(!(e=za.exec(t)))throw new Error("invalid format: "+t);var e;return new Xa({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Xa(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ba.prototype=Xa.prototype,Xa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Va=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function $a(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var Ha,Ya,Ua,Ja,Ka=function(t){return t=$a(Math.abs(t)),t?t[1]:NaN},Wa=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ka(e)/3)))-Ka(Math.abs(t)))},Za=function(t,e){return function(n,r){var i=n.length,o=[],a=0,c=t[0],u=0;while(i>0&&c>0){if(u+c+1>r&&(c=Math.max(1,r-u)),o.push(n.substring(i-=c,i+c)),(u+=c+1)>r)break;c=t[a=(a+1)%t.length]}return o.reverse().join(e)}},Qa=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},tc=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t},ec=function(t,e){var n=$a(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ha=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+$a(t,Math.max(0,e+o-1))[0]},nc=function(t,e){var n=$a(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},rc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Va,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nc(100*t,e),r:nc,s:ec,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},ic=function(t){return t},oc=Array.prototype.map,ac=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],cc=function(t){var e=void 0===t.grouping||void 0===t.thousands?ic:Za(oc.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?ic:Qa(oc.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function s(t){t=Ba(t);var s=t.fill,l=t.align,f=t.sign,h=t.symbol,d=t.zero,b=t.width,p=t.comma,g=t.precision,m=t.trim,v=t.type;"n"===v?(p=!0,v="g"):rc[v]||(void 0===g&&(g=12),m=!0,v="g"),(d||"0"===s&&"="===l)&&(d=!0,s="0",l="=");var _="$"===h?n:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===h?r:/[%p]/.test(v)?a:"",O=rc[v],j=/[defgprs%]/.test(v);function w(t){var n,r,a,h=_,w=y;if("c"===v)w=O(t)+w,t="";else{t=+t;var x=t<0||1/t<0;if(t=isNaN(t)?u:O(Math.abs(t),g),m&&(t=tc(t)),x&&0===+t&&"+"!==f&&(x=!1),h=(x?"("===f?f:c:"-"===f||"("===f?"":f)+h,w=("s"===v?ac[8+Ha/3]:"")+w+(x&&"("===f?")":""),j){n=-1,r=t.length;while(++n<r)if(a=t.charCodeAt(n),48>a||a>57){w=(46===a?i+t.slice(n+1):t.slice(n))+w,t=t.slice(0,n);break}}}p&&!d&&(t=e(t,1/0));var A=h.length+t.length+w.length,k=A<b?new Array(b-A+1).join(s):"";switch(p&&d&&(t=e(k+t,k.length?b-w.length:1/0),k=""),l){case"<":t=h+t+w+k;break;case"=":t=h+k+t+w;break;case"^":t=k.slice(0,A=k.length>>1)+h+t+w+k.slice(A);break;default:t=k+h+t+w;break}return o(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return t+""},w}function l(t,e){var n=s((t=Ba(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ka(e)/3))),i=Math.pow(10,-r),o=ac[8+r/3];return function(t){return n(i*t)+o}}return{format:s,formatPrefix:l}};function uc(t){return Ya=cc(t),Ua=Ya.format,Ja=Ya.formatPrefix,Ya}uc({thousands:",",grouping:[3],currency:["$",""]});var sc=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ka(e)-Ka(t))+1},lc=function(t){return Math.max(0,-Ka(Math.abs(t)))};function fc(t,e,n,r){var i,o=ja(t,e,n);switch(r=Ba(null==r?",f":r),r.type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Wa(o,a))||(r.precision=i),Ja(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=sc(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=lc(o))||(r.precision=i-2*("%"===r.type));break}return Ua(r)}function hc(t){var e=t.domain;return t.ticks=function(t){var n=e();return ya(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return fc(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,c=o.length-1,u=o[a],s=o[c],l=10;s<u&&(i=u,u=s,s=i,i=a,a=c,c=i);while(l-- >0){if(i=Oa(u,s,n),i===r)return o[a]=u,o[c]=s,e(o);if(i>0)u=Math.floor(u/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function dc(){var t=La();return t.copy=function(){return Ga(t,dc())},ua.apply(t,arguments),hc(t)}var bc=function(t){return"string"===typeof t?new _n([document.querySelectorAll(t)],[document.documentElement]):new _n([At(t)],vn)},pc=1e-12;function gc(t){return((t=Math.exp(t))+1/t)/2}function mc(t){return((t=Math.exp(t))-1/t)/2}function vc(t){return((t=Math.exp(2*t))-1)/(t+1)}(function t(e,n,r){function i(t,i){var o,a,c=t[0],u=t[1],s=t[2],l=i[0],f=i[1],h=i[2],d=l-c,b=f-u,p=d*d+b*b;if(p<pc)a=Math.log(h/s)/e,o=function(t){return[c+t*d,u+t*b,s*Math.exp(e*t*a)]};else{var g=Math.sqrt(p),m=(h*h-s*s+r*p)/(2*s*n*g),v=(h*h-s*s-r*p)/(2*h*n*g),_=Math.log(Math.sqrt(m*m+1)-m),y=Math.log(Math.sqrt(v*v+1)-v);a=(y-_)/e,o=function(t){var r=t*a,i=gc(_),o=s/(n*g)*(i*vc(e*r+_)-mc(_));return[c+o*d,u+o*b,s*i/gc(e*r+_)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n,i=r*r;return t(n,r,i)},i})(Math.SQRT2,2,4);function _c(t,e,n){this.k=t,this.x=e,this.y=n}_c.prototype={constructor:_c,scale:function(t){return 1===t?this:new _c(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _c(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yc=new _c(1,0,0);function Oc(t){while(!t.__zoom)if(!(t=t.parentNode))return yc;return t.__zoom}Oc.prototype=_c.prototype;function jc(t,e,n,i,o,a){return Object(r["u"])(),Object(r["f"])("td",null,[Object(r["g"])("div",{class:"bg",style:Object(r["q"])({width:n.percentage_number+"%"})},null,4),Object(r["i"])(" "+Object(r["D"])(n.percentage(n.percentage_number)),1)])}var wc={name:"Percentage",props:{percentage:Function,percentage_number:Number},computed:{}},xc=(n("ee9b"),n("6b0d")),Ac=n.n(xc);const kc=Ac()(wc,[["render",jc],["__scopeId","data-v-21b06d4a"]]);var Tc=kc,Cc=Object(r["g"])("div",{id:"sliding"},null,-1);function Sc(t,e,n,i,o,a){return Object(r["u"])(),Object(r["f"])(r["a"],null,[Cc,Object(r["L"])(Object(r["g"])("p",null,Object(r["D"])(a.new_sequence),513),[[r["I"],!1]])],64)}n("159b");var Mc={components:{},data:function(){return{}},props:{sequence:String},methods:{updateBarChart:function(t){wn("svg").remove();for(var e=0;e<8;e++)t.push({index:t.length,value:0});console.log(t);var n={top:20,right:20,bottom:90,left:20},r={top:230,right:20,bottom:30,left:20},i=800-n.left-n.right,o=300-n.top-n.bottom,a=300-r.top-r.bottom,c=wn("#sliding").append("svg").attr("width",i+n.left+n.right).attr("height",o+n.top+n.bottom),u=c.append("g").attr("transform","translate("+n.left+","+n.top+")"),s=c.append("g").attr("transform","translate("+r.left+","+r.top+")"),l=dc().range([0,0]).domain([0,0]),f=ga().range([0,i]);f.domain(et(0,t.length));var h=dc().range([0,a]).domain([0,0]),d=ga().range([0,i]);d.domain(et(0,t.length));var b=bt(f).tickSize(0),p=u.append("g").attr("transform","translate(0,"+o+")"),g=bt(d).tickValues(f.domain().filter((function(t,e){return!(e%20)}))),m=(s.append("g").call(g).attr("transform","translate(0,"+a+")"),[]),v=[];m.push({}),d.domain().forEach((function(e,n){if(m.length<22){var r=t.filter((function(t){return t.index==e}));m.push(r[0]),v.push(e)}})),f.domain(v);var _=u.selectAll("rect").data(t).enter().append("rect");_.attr("id",(function(t,e){return"b"+t.index})).attr("x",(function(t,e){return f(t.index)})).attr("y",(function(t){return l(t.value)})).attr("width",f.bandwidth()).attr("height",(function(t,e){return-1===f.domain().indexOf(e)?0:o})).attr("fill",(function(t){return"none"})).on("click",(function(t,e){var n=wn(this).attr("id"),r=n.substring(1,n.length);console.log(r)})),p.call(b),u.selectAll("path").data(m).enter().append("path").attr("id",(function(t,e){return"b"+t.index})).attr("d",(function(t,e){return 1==t.value?"m 144.59,56.29 -5,13.27 h -8.48 L 147.55,21 h 7.56 l 16.56,48.53 H 163 l -5.18,-13.27 z m 11.91,-6.9 v 0 l -5.26063,-16.351734 v 0 L 145.89,49.31 v 0 z":2==t.value?"M 142,30.35 H 129.19 V 21 h 35.93 v 9.33 h -12.83 v 39.2 H 142 Z":3==t.value?"m 168.65,68 c -2.3,1.15 -6.91,2.3 -12.82,2.3 -13.68,0 -24,-8.64 -24,-24.55 0,-15.19 10.3,-25.49 25.35,-25.49 6,0 9.86,1.3 11.52,2.16 l -3.53135,7.131354 c -2.57018,-1.213266 -5.82943,-1.138298 -8.52666,-0.989324 -10.11665,0.168446 -15.99219,6.764662 -16.07641,16.96797 0.16844,9.774423 4.90287,16.814862 16.71287,16.814862 2.83865,0.05714 6.66081,-0.54002 9.30355,-1.241993 z":4==t.value?"m 171.68,67.39 c -4.78512,1.718575 -9.8258,2.617852 -14.91,2.66 -7.34,0 -13.39,-1.87 -18.15,-6.41 -4.18,-4 -6.77,-10.51 -6.77,-18.07 0.07,-14.47 10,-25.06 26.28,-25.06 4.14408,-0.10062 8.46373,0.858362 12.29968,2.762485 l -2.50841,6.640895 C 164.5434,28.443296 162.68021,27.639533 158,27.76682 c -11.21095,0 -17.09113,8.671212 -17.11382,17.51318 0.0227,10.239742 7.28688,17.060696 16.32382,17.060696 2.63567,0 4.67493,-0.352283 6.66228,-1.499682 l 0,-10.27668 H 155.7 V 44.1 h 16 z":null})).attr("fill",(function(t){return 1==t.value?"#32cd32":2==t.value?"#ff4500":3==t.value?"#1e90ff":4==t.value?"#ffa500":null})).attr("transform",(function(t,e){var n=f(t.index)-103,r=-20;return"translate("+n+","+r+") scale(0.8, 3)"})).on("click",(function(t,e){var n=wn(this).attr("id"),r=n.substring(1,n.length);console.log(r)}));var y=s.selectAll("rect").data(t).enter().append("rect");y.attr("x",(function(t,e){return d(t.index)})).attr("y",(function(t){return h(t.value)})).attr("width",d.bandwidth()).attr("height",(function(t){return a-h(t.value)})).attr("fill",(function(t){return 1==t.value?"#32cd32":2==t.value?"#ff4500":3==t.value?"#1e90ff":4==t.value?"#ffa500":"#ffffff"}));var O=aa().extent([[0,0],[i,a]]).on("brush",j).on("end",w);function j(e){if(e.sourceEvent&&e.selection&&(!e.sourceEvent||"zoom"!==e.sourceEvent.type)){var n=[],r=[],i=e.selection;if(null===i&&(i=[0,80]),i[1]-i[0]<80)bc(".brush").call(O.move,[a,c]);else{var a=i[0],c=i[1];d.domain().forEach((function(e,o){if(n.length<21){var a=d(e)+d.bandwidth()/2;if(a>=i[0]&&a<=i[1]){n.push(e);var c=t.filter((function(t){return t.index==e}));r.push(c[0])}}})),21==n.length&&(f.domain(n),_.attr("x",(function(t,e){return f(t.index)})).attr("y",(function(t){return l(t.value)})).attr("width",f.bandwidth()).attr("height",(function(t,e){return-1===f.domain().indexOf(e)?0:o-l(t.value)})),bc("path").remove(),u.selectAll("path").data(r).enter().append("path").attr("id",(function(t,e){return"b"+t.index})).attr("d",(function(t,e){return 1==t.value?"m 144.59,56.29 -5,13.27 h -8.48 L 147.55,21 h 7.56 l 16.56,48.53 H 163 l -5.18,-13.27 z m 11.91,-6.9 v 0 l -5.26063,-16.351734 v 0 L 145.89,49.31 v 0 z":2==t.value?"M 142,30.35 H 129.19 V 21 h 35.93 v 9.33 h -12.83 v 39.2 H 142 Z":3==t.value?"m 168.65,68 c -2.3,1.15 -6.91,2.3 -12.82,2.3 -13.68,0 -24,-8.64 -24,-24.55 0,-15.19 10.3,-25.49 25.35,-25.49 6,0 9.86,1.3 11.52,2.16 l -3.53135,7.131354 c -2.57018,-1.213266 -5.82943,-1.138298 -8.52666,-0.989324 -10.11665,0.168446 -15.99219,6.764662 -16.07641,16.96797 0.16844,9.774423 4.90287,16.814862 16.71287,16.814862 2.83865,0.05714 6.66081,-0.54002 9.30355,-1.241993 z":4==t.value?"m 171.68,67.39 c -4.78512,1.718575 -9.8258,2.617852 -14.91,2.66 -7.34,0 -13.39,-1.87 -18.15,-6.41 -4.18,-4 -6.77,-10.51 -6.77,-18.07 0.07,-14.47 10,-25.06 26.28,-25.06 4.14408,-0.10062 8.46373,0.858362 12.29968,2.762485 l -2.50841,6.640895 C 164.5434,28.443296 162.68021,27.639533 158,27.76682 c -11.21095,0 -17.09113,8.671212 -17.11382,17.51318 0.0227,10.239742 7.28688,17.060696 16.32382,17.060696 2.63567,0 4.67493,-0.352283 6.66228,-1.499682 l 0,-10.27668 H 155.7 V 44.1 h 16 z":null})).attr("fill",(function(t){return 1==t.value?"#32cd32":2==t.value?"#ff4500":3==t.value?"#1e90ff":4==t.value?"#ffa500":null})).attr("transform",(function(t,e){var n=f(t.index)-103,r=l(t.value)-20;return"translate("+n+","+r+") scale(0.8, 3)"})).on("click",(function(t,e){var n=wn(this).attr("id"),r=n.substring(1,n.length);console.log(r)})),p.call(b))}}}function w(t){if(t.sourceEvent&&t.selection&&(!t.sourceEvent||"zoom"!==t.sourceEvent.type)){var e=[],n=t.selection;if(null===n&&(n=f.range()),n[1]-n[0]<80)bc(".brush").call(O.move,[r,i]);else{var r=n[0],i=n[1];d.domain().forEach((function(t){if(e.length<21){var r=d(t)+d.bandwidth()/2;r>=n[0]&&r<=n[1]&&e.push(t)}}));if(e.length>21){var o=d(tt(e)),a=d(Q(e))+d.bandwidth();wn(this).transition().call(O.move,[o,a])}}}}s.append("g").attr("class","brush").call(O).call(O.move,[0,80])}},mounted:function(){this.updateBarChart(this.encoded)},computed:{encoded:function(){return Array.from(Array.from(this.sequence),(function(t,e){if("A"==t){var n={};return n["index"]=e,n["value"]=1,n}if("T"==t){var r={};return r["index"]=e,r["value"]=2,r}if("C"==t){var i={};return i["index"]=e,i["value"]=3,i}if("G"==t){var o={};return o["index"]=e,o["value"]=4,o}}))},new_sequence:function(){return this.updateBarChart(this.encoded),this.encoded}}};const Rc=Ac()(Mc,[["render",Sc]]);var Fc=Rc,Nc=function(t){return Object(r["x"])("data-v-658b6dea"),t=t(),Object(r["v"])(),t},Ec={id:"slider"},Dc=["viewBox"],qc=["transform"],Ic=["d","transform"],Gc=["x","height","width","onClick"],Pc=["x","y","height","width"],Lc=["x"],zc=Nc((function(){return Object(r["g"])("title",null,"Add solution",-1)})),Bc=[zc],Xc=["x"],Vc=["transform"],$c=["transform"],Hc=["transform"],Yc=["x","y","width","height"];function Uc(t,e,n,i,o,a){return Object(r["u"])(),Object(r["f"])("div",Ec,[(Object(r["u"])(),Object(r["f"])("svg",{preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 ".concat(t.width," ").concat(t.height+t.h_heatmap)},[Object(r["g"])("g",{id:"logo",transform:"translate(0, ".concat(t.margin.top,")")},[Object(r["g"])("g",null,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(a.logo_paths,(function(t,e){return Object(r["u"])(),Object(r["f"])("path",{key:e,d:a.getLetterPath(t.value),class:Object(r["p"])(t.base),transform:t.transform},null,10,Ic)})),128)),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(a.logo_paths,(function(e,n){return Object(r["u"])(),Object(r["f"])("rect",{key:n,x:a.logo_x_scale(n),y:0,height:a.logo_y_scale(1),width:a.logo_x_scale.bandwidth(),fill:"#ffffff00",onClick:function(e){return t.choose_idx=n+t.offset}},null,8,Gc)})),128)),Object(r["g"])("rect",{class:"middle",x:a.logo_x_scale(7)-1,y:-a.logo_y_scale(.05),height:a.logo_y_scale(1.1),width:a.logo_x_scale(7)-2,rx:"5",ry:"5"},null,8,Pc),Object(r["g"])("rect",{class:"add",x:a.logo_x_scale(7)+5,y:2,height:20,width:20,rx:"3",ry:"3",onClick:e[0]||(e[0]=function(e){return t.$emit("add",t.offset+8)})},Bc,8,Lc),Object(r["g"])("text",{class:"add",x:a.logo_x_scale(7)+5+10,y:12,"dominant-baseline":"middle","text-anchor":"middle"},"+",8,Xc)]),Object(r["g"])("g",{transform:"translate(0, ".concat(t.height-t.margin.top-t.margin.bottom,")"),ref:"logo_x_axis"},null,8,Vc)],8,qc),Object(r["g"])("g",{id:"heatmap",transform:"translate(0, ".concat(t.height,")")},[Object(r["g"])("g",{transform:"translate(0, ".concat(t.h_heatmap-t.margin.bottom,")"),ref:"heatmap_x_axis"},null,8,Hc),Object(r["g"])("g",null,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(a.heatmap_rects,(function(t,e){return Object(r["u"])(),Object(r["f"])("rect",{key:e,x:t.x,y:t.y,width:t.width,height:t.height,class:Object(r["p"])(t.class)},null,10,Yc)})),128))])],8,$c)],8,Dc))])}var Jc=n("6b75");function Kc(t){if(Array.isArray(t))return Object(Jc["a"])(t)}n("d28b"),n("ddb0");function Wc(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var Zc=n("06c5");function Qc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tu(t){return Kc(t)||Wc(t)||Object(Zc["a"])(t)||Qc()}n("cb29");var eu={name:"Slider",emits:["add","jump"],data:function(){return{width:1080,height:70,h_heatmap:40,margin:{top:5,bottom:20},offset:0,focus_len:21,choose_idx:0}},props:{sequence:String,default_pos:Number},methods:{get_bbox:function(t){return"G"===t?{height:49.54718017578125,width:39.850006103515625,x:131.84999084472656,y:20.502824783325195}:"A"===t?{height:48.55999755859375,width:40.55999755859375,x:131.11000061035156,y:21}:"C"===t?{height:50.040000915527344,width:36.87001037597656,x:131.82998657226562,y:20.2600040435791}:"T"===t?{height:48.529998779296875,width:35.92999267578125,x:129.19000244140625,y:21}:null},calcPathTransform:function(t,e,n,r,i){var o=e(1),a=n,c=o/t.height,u=a/t.width,s=t.x,l=t.y,f=(i-l)/c,h=(r-s)/u,d=s*(1-u),b=l*(1-c);return"translate(".concat(d,",").concat(b,") scale(").concat(u,",").concat(c,") translate(").concat(h,",").concat(f,")")},getLetterPath:function(t){var e="m 144.59,56.29 -5,13.27 h -8.48 L 147.55,21 h 7.56 l 16.56,48.53 H 163 l -5.18,-13.27 z m 11.91,-6.9 v 0 l -5.26063,-16.351734 v 0 L 145.89,49.31 v 0 z",n="m 171.68,67.39 c -4.78512,1.718575 -9.8258,2.617852 -14.91,2.66 -7.34,0 -13.39,-1.87 -18.15,-6.41 -4.18,-4 -6.77,-10.51 -6.77,-18.07 0.07,-14.47 10,-25.06 26.28,-25.06 4.14408,-0.10062 8.46373,0.858362 12.29968,2.762485 l -2.50841,6.640895 C 164.5434,28.443296 162.68021,27.639533 158,27.76682 c -11.21095,0 -17.09113,8.671212 -17.11382,17.51318 0.0227,10.239742 7.28688,17.060696 16.32382,17.060696 2.63567,0 4.67493,-0.352283 6.66228,-1.499682 l 0,-10.27668 H 155.7 V 44.1 h 16 z",r="M 142,30.35 H 129.19 V 21 h 35.93 v 9.33 h -12.83 v 39.2 H 142 Z",i="m 168.65,68 c -2.3,1.15 -6.91,2.3 -12.82,2.3 -13.68,0 -24,-8.64 -24,-24.55 0,-15.19 10.3,-25.49 25.35,-25.49 6,0 9.86,1.3 11.52,2.16 l -3.53135,7.131354 c -2.57018,-1.213266 -5.82943,-1.138298 -8.52666,-0.989324 -10.11665,0.168446 -15.99219,6.764662 -16.07641,16.96797 0.16844,9.774423 4.90287,16.814862 16.71287,16.814862 2.83865,0.05714 6.66081,-0.54002 9.30355,-1.241993 z";return 1===t?e:2===t?r:3===t?i:4===t?n:null},brushed:function(t){if(t.sourceEvent&&t.selection&&(!t.sourceEvent||"zoom"!==t.sourceEvent.type)){var e=this.heatmap_x_scale.step(),n=Math.round(t.selection[0]/e);this.offset=n,this.$emit("jump",this.offset+8)}}},computed:{viewBox:function(){return"0 0 ".concat(this.width," ").concat(this.height)},logo_x_scale:function(){return ga().domain(tu(Array(this.focus_len).keys())).range([0,this.width]).padding(.05)},logo_y_scale:function(){return dc().domain([0,1]).range([0,this.height-this.margin.top-this.margin.bottom])},heatmap_x_scale:function(){return ga().domain(tu(Array(this.encoded.length).keys())).range([0,this.width]).padding(0)},heatmap_y_scale:function(){return ga().domain(["base"]).range([0,this.h_heatmap-this.margin.bottom]).padding(0)},encoded:function(){return Array.from(Array.from(this.sequence),(function(t,e){var n=0;return"A"==t&&(n=1),"T"==t&&(n=2),"C"==t&&(n=3),"G"==t&&(n=4),{index:e,value:n,base:t}}))},encoded_focused:function(){return this.offset>=0?this.encoded.slice(this.offset,this.offset+this.focus_len):Array(-this.offset).fill(null).concat(this.encoded.slice(0,this.offset+this.focus_len))},logo_paths:function(){var t=this;return Array.from(Array.from(this.encoded_focused),(function(e,n){return{index:n,value:null==e?null:e.value,base:null==e?null:e.base,x:t.logo_x_scale(n),y:0,transform:null==e?null:t.calcPathTransform(t.get_bbox(e.base),t.logo_y_scale,t.logo_x_scale.bandwidth(),t.logo_x_scale(n),0)}}))},heatmap_rects:function(){var t=this;return Array.from(Array.from(this.encoded),(function(e,n){return{index:n,value:e.value,x:t.heatmap_x_scale(n),y:t.heatmap_y_scale("base"),width:t.heatmap_x_scale.bandwidth(),height:t.heatmap_y_scale.bandwidth(),class:e.base}}))}},watch:{offset:function(){var t=this;wn(this.$refs.logo_x_axis).call(bt(this.logo_x_scale).tickFormat((function(e){return e+t.offset+1})))},heatmap_x_scale:function(){wn(this.$refs.heatmap_x_axis).call(bt(this.heatmap_x_scale).tickFormat((function(t){return t+1})).tickValues(this.heatmap_x_scale.domain().filter((function(t,e){return!(e%50)}))));var t=aa().extent([[-this.heatmap_x_scale(7),0],[this.width+this.heatmap_x_scale(7),this.h_heatmap-this.margin.bottom]]).on("brush",this.brushed);wn("#heatmap-brush").remove();bc("#heatmap").append("g").attr("id","heatmap-brush").call(t).call(t.move,[this.heatmap_x_scale(this.default_pos-8),this.heatmap_x_scale(this.default_pos-8+this.focus_len)]);this.offset=this.default_pos-8,bc("#heatmap-brush>.handle").remove(),bc("#heatmap-brush>.overlay").remove()}},mounted:function(){var t=this;wn(this.$refs.logo_x_axis).call(bt(this.logo_x_scale).tickFormat((function(e){return e+t.offset+1})))}};n("5977"),n("0cc8");const nu=Ac()(eu,[["render",Uc],["__scopeId","data-v-658b6dea"]]);var ru=nu,iu={components:{Percentage:Tc,SlidingWindow:Fc,Slider:ru},name:"Summary",data:function(){return{idxShown:0,idxJump:1,currentSort:"idx",currentSortDir:"asc"}},props:{name:String,sequence:String,results:Array,summarydata:Array,is_corsid_a:Boolean,leader_end:Number},methods:{percentage:function(t){return parseFloat(t).toFixed(2)+"%"},sort:function(t){t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},add:function(t){console.log(t);var e=this.sortedSummaryData.filter((function(e){return e.pos===t}));console.log(e),0!==e.length?this.$emit("add-solution",[e[0].idx-1,this.results[e[0].idx-1]]):console.log("no such records")},add_idx_shown:function(){this.idxShown<this.results.length-10&&(this.idxShown+=10)},sub_idx_shown:function(){this.idxShown>=10?this.idxShown-=10:this.idxShown-=this.idxShown},jump:function(t){var e=this.sortedSummaryData.findIndex((function(e){return e.pos==t}));if(-1==e)return console.log("no such records"),this.$emit("no-solution",t),void(this.message="There are no records with position "+t+".");this.message="",this.jumpto(e)},jumpto:function(t){isNaN(t)?alert("please enter a number"):t<0||t>=this.results.length?alert("index out of range"):this.idxShown=t}},computed:{sortedSummaryData:function(){var t=this;return this.summarydata.sort((function(e,n){var r=1;return"desc"===t.currentSortDir&&(r=-1),e[t.currentSort]<n[t.currentSort]?-1*r:e[t.currentSort]>n[t.currentSort]?1*r:0}))},class_sorted:function(){return"asc"===this.currentSortDir?"fas fa-sort-up":"fas fa-sort-down"}}};n("cd21");const ou=Ac()(iu,[["render",Z],["__scopeId","data-v-6403a8e6"]]);var au=ou,cu=(n("a15b"),function(t){return Object(r["x"])("data-v-7f7cc4ec"),t=t(),Object(r["v"])(),t}),uu={class:"solution"},su={style:{width:"20%",float:"left"}},lu={style:{"font-weight":"bold"}},fu=cu((function(){return Object(r["g"])("br",null,null,-1)})),hu=cu((function(){return Object(r["g"])("dt",null,"Sample",-1)})),du=Object(r["i"])(),bu=cu((function(){return Object(r["g"])("dt",null,"Core sequence",-1)})),pu=Object(r["i"])(),gu={style:{display:"flex"}},mu=cu((function(){return Object(r["g"])("dt",null,"Position",-1)})),vu=Object(r["i"])(),_u=cu((function(){return Object(r["g"])("dt",null,"TRS-L",-1)})),yu=Object(r["i"])(),Ou=cu((function(){return Object(r["g"])("dt",null,"Weight",-1)})),ju=cu((function(){return Object(r["g"])("dt",null,"Genome coverage",-1)})),wu=cu((function(){return Object(r["g"])("dt",null,"Total Score",-1)})),xu=cu((function(){return Object(r["g"])("dt",null,"#ORFs",-1)})),Au=Object(r["i"])(),ku={key:2},Tu=Object(r["i"])(),Cu=cu((function(){return Object(r["g"])("dt",null,"Range",-1)})),Su=Object(r["i"])(),Mu={style:{width:"80%",float:"right"}},Ru={class:"top_corner"},Fu={class:"close"},Nu=cu((function(){return Object(r["g"])("br",null,null,-1)})),Eu={key:0,class:"svg"},Du=["id"],qu=["id"],Iu={style:{"text-align":"center"}},Gu=Object(r["i"])(" All "),Pu={class:"aligned"},Lu=["id","value"],zu=["for"],Bu=cu((function(){return Object(r["g"])("br",null,null,-1)})),Xu=["onDblclick"],Vu={key:0},$u=["onUpdate:modelValue","placeholder","onChange","onBlur"],Hu={class:"aligned"};function Yu(t,e,n,i,o,a){var c=this,u=Object(r["B"])("Interval"),s=Object(r["B"])("SeqLogoPlot");return Object(r["u"])(),Object(r["f"])("div",uu,[Object(r["g"])("div",su,[Object(r["g"])("dt",lu,"#"+Object(r["D"])(n.res[0]+1),1),fu,hu,du,Object(r["g"])("dd",null,Object(r["D"])(n.name),1),bu,pu,Object(r["g"])("dd",null,[Object(r["g"])("div",gu,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.res[1].leader_core_seq,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))])]),mu,vu,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].leader_core_start+1),1),_u,yu,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].TRS_L_start+1)+" - "+Object(r["D"])(n.res[1].TRS_L_start+n.res[1].TRS_L_len+1),1),n.is_corsid_a?(Object(r["u"])(),Object(r["f"])(r["a"],{key:0},[Ou,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].weight),1)],64)):(Object(r["u"])(),Object(r["f"])(r["a"],{key:1},[ju,Object(r["g"])("dd",null,Object(r["D"])(a.percentage(100*(1-n.res[1].compact))),1),wu,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].bodys.reduce((function(t,e){return+t+(+e.score||0)}),0)),1)],64)),xu,Au,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].n_intervals),1),n.res[1].missing_ORF.length?(Object(r["u"])(),Object(r["f"])("dt",ku,"Missing ORFs")):Object(r["e"])("",!0),Tu,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].missing_ORF.join(", ")),1),Cu,Su,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].body_range_start)+" - "+Object(r["D"])(n.res[1].body_range_start+n.res[1].body_range_len),1),Object(r["g"])("dt",null,[Object(r["g"])("div",null,[Object(r["g"])("button",{type:"submit",onClick:e[0]||(e[0]=function(t){return a.download(n.name+".fasta")})},"Download FASTA")])])]),Object(r["g"])("div",Mu,[Object(r["g"])("span",Ru,[Object(r["g"])("i",{class:"fas fa-arrow-up",onClick:e[1]||(e[1]=function(e){return t.$emit("move-up",n.res)})}),Object(r["g"])("i",{class:"fas fa-arrow-down",onClick:e[2]||(e[2]=function(e){return t.$emit("move-down",n.res)})}),Object(r["g"])("span",Fu,[Object(r["g"])("i",{class:"fas fa-times",onClick:e[3]||(e[3]=function(e){return t.$emit("remove-solution",n.res[0])})})])]),Nu,o.is_show_plot?(Object(r["u"])(),Object(r["f"])("div",Eu,[Object(r["g"])("div",{id:n.name+"-"+n.res[0]+"-interval"},[Object(r["j"])(u,{id:n.name+"-"+n.res[0]+"-interval",start:0,intervals:n.intervals},null,8,["id","intervals"])],8,Du),Object(r["g"])("div",{id:n.name+"-"+n.res[0]+"-logo"},[Object(r["j"])(s,{id:n.name+"-"+n.res[0]+"-seq",sequences:n.sequences,box:n.box},null,8,["id","sequences","box"])],8,qu)])):Object(r["e"])("",!0)]),Object(r["g"])("table",null,[Object(r["g"])("thead",null,[Object(r["g"])("tr",null,[Object(r["g"])("th",Iu,[Gu,Object(r["L"])(Object(r["g"])("input",{type:"checkbox",onChange:e[4]||(e[4]=function(t){return a.check_all()}),"onUpdate:modelValue":e[5]||(e[5]=function(t){return o.is_checkall=t})},null,544),[[r["F"],o.is_checkall]])]),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.header,(function(t){return Object(r["u"])(),Object(r["f"])("th",{key:t,style:{"text-align":"center"}},Object(r["D"])(t),1)})),128)),Object(r["g"])("th",Pu,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.res[1].TRS_L_seq,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))])])]),Object(r["g"])("tbody",null,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.reverse_bodys,(function(n,i){var u;return Object(r["u"])(),Object(r["f"])("tr",{key:n.ORF_start},[Object(r["g"])("td",null,[Object(r["i"])(Object(r["D"])(n.check)+" ",1),Object(r["L"])(Object(r["g"])("input",{type:"checkbox",id:"ORF-".concat(i),value:i,"onUpdate:modelValue":e[6]||(e[6]=function(t){return o.selectedIDX=t})},null,8,Lu),[[r["F"],o.selectedIDX]]),Object(r["g"])("label",{for:"ORF-".concat(i)},null,8,zu),Bu]),Object(r["g"])("td",{onDblclick:function(t){return a.modify_ORF(i,t)},class:"modify-ORF"},[o.is_editing[i]?Object(r["L"])((Object(r["u"])(),Object(r["f"])("input",{key:1,"onUpdate:modelValue":function(t){return n.ORF=t},type:"text",name:"ORF",class:"modify-ORF",placeholder:n.ORF,size:"1",onChange:function(e){return t.$emit("write-to-json",[c.res[0],i,n.ORF,n.ORF_start])},onBlur:function(t){return o.is_editing[i]=!1}},null,40,$u)),[[r["H"],n.ORF]]):(Object(r["u"])(),Object(r["f"])("span",Vu,Object(r["D"])(n.ORF),1))],40,Xu),Object(r["g"])("td",null,Object(r["D"])(n.score),1),Object(r["g"])("td",null,Object(r["D"])(null!==n.core_start?n.core_start+1:""),1),Object(r["g"])("td",null,Object(r["D"])(null!==n.core_start?n.core_start+n.core_len+1:""),1),Object(r["g"])("td",null,Object(r["D"])(null!==(u=n.core_len)&&void 0!==u?u:""),1),Object(r["g"])("td",null,Object(r["D"])(n.ORF_start+1),1),Object(r["g"])("td",null,Object(r["D"])(n.ORF_start+n.ORF_len+1),1),Object(r["g"])("td",null,Object(r["D"])(n.ORF_len),1),Object(r["g"])("td",Hu,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.align,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))])])})),128))])])])}var Uu=["viewBox","height"],Ju=["transform"],Ku=["x","y","width","height"],Wu=["x","y"];function Zu(t,e,n,i,o,a){return Object(r["u"])(),Object(r["f"])("svg",{viewBox:a.viewBox,height:t.height},[Object(r["g"])("g",null,[Object(r["g"])("g",{class:"x-axis",transform:"translate(0, ".concat(t.height-t.margin.bottom,")"),ref:"x_axis"},null,8,Ju),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(this.rects,(function(t){return Object(r["u"])(),Object(r["f"])("rect",{key:t.key,x:t.x,y:t.y,width:t.width,height:t.height},null,8,Ku)})),128)),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(this.labels,(function(t){return Object(r["u"])(),Object(r["f"])("text",{key:t.key,x:t.x,y:t.y},Object(r["D"])(t.name),9,Wu)})),128))])],8,Uu)}n("d81d");var Qu={name:"IntervalPlot",props:{id:String,intervals:Array,start:Number},data:function(){return{width:380,height:230,margin:{bottom:20,right:20}}},mounted:function(){wn(this.$refs.x_axis).call(bt(this.x_scale))},computed:{min_x:function(){return tt(this.intervals,(function(t){return t.start}))},max_x:function(){return Q(this.intervals,(function(t){return t.end}))},y_scale:function(){return ga().range([0,this.height-this.margin.bottom]).domain(this.intervals.map((function(t){return t.id}))).padding(.1)},x_scale:function(){return dc().domain([this.min_x,this.max_x]).range([0,this.width-this.margin.right])},rects:function(){var t=this;return this.intervals.map((function(e){return{key:e.start,x:t.x_scale(e.start),y:t.y_scale(e.id),width:t.x_scale(e.end-e.start+t.min_x),height:t.y_scale.bandwidth()}}))},labels:function(){var t=this;return this.intervals.map((function(e){return{key:e.start,x:t.x_scale(e.end)+3,y:t.y_scale(e.id)+t.y_scale.bandwidth()/2+6,name:e.name}}))},viewBox:function(){return"0 0 ".concat(this.width," ").concat(this.height)}}};n("4699");const ts=Ac()(Qu,[["render",Zu],["__scopeId","data-v-ec374cea"]]);var es=ts,ns=["viewBox","height"],rs=["transform"],is=["transform"],os=["d","transform"],as=["x","width","height"];function cs(t,e,n,i,o,a){return Object(r["u"])(),Object(r["f"])("svg",{viewBox:a.viewBox,height:t.height},[Object(r["g"])("g",null,[Object(r["g"])("g",{class:"x-axis",transform:"translate(0, ".concat(t.height-t.margin.bottom,")"),ref:"x_axis"},null,8,rs),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(this.columns,(function(t,e){return Object(r["u"])(),Object(r["f"])("g",{key:"col-".concat(e),transform:"translate(".concat(t.x,", 0)")},[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(t.bases,(function(t,e){return Object(r["u"])(),Object(r["f"])("path",{key:"base-".concat(e),d:a.getLetterPath(t.base),transform:"translate(".concat(t.preTX,",").concat(t.preTY,") scale(").concat(t.scaleX,",").concat(t.scaleY,") translate(").concat(t.postTX,",").concat(t.postTY,")"),class:Object(r["p"])(t.base)},null,10,os)})),128))],8,is)})),128)),Object(r["g"])("rect",{x:a.x_scale(n.box.start),y:0,width:a.x_scale(n.box.len)-a.x_scale(0),height:t.height,class:"core-box"},null,8,as)])],8,ns)}n("b64b"),n("e439"),n("dbb4");function us(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ss(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ss(Object(n),!0).forEach((function(e){us(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fs(t){if(Array.isArray(t))return t}function hs(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){c=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(c)throw i}}return o}}function ds(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bs(t,e){return fs(t)||hs(t,e)||Object(Zc["a"])(t,e)||ds()}n("4fad");var ps={name:"SeqLogoPlot",props:{id:String,sequences:Array,box:Object},data:function(){return{width:380,height:230,margin:{bottom:20}}},mounted:function(){var t=this;wn(this.$refs.x_axis).call(bt(this.x_scale).tickFormat((function(e){return(e+t.box.TRS_L_start)%5?"":e+t.box.TRS_L_start})))},methods:{getLetterPath:function(t){var e="m 144.59,56.29 -5,13.27 h -8.48 L 147.55,21 h 7.56 l 16.56,48.53 H 163 l -5.18,-13.27 z m 11.91,-6.9 v 0 l -5.26063,-16.351734 v 0 L 145.89,49.31 v 0 z",n="m 171.68,67.39 c -4.78512,1.718575 -9.8258,2.617852 -14.91,2.66 -7.34,0 -13.39,-1.87 -18.15,-6.41 -4.18,-4 -6.77,-10.51 -6.77,-18.07 0.07,-14.47 10,-25.06 26.28,-25.06 4.14408,-0.10062 8.46373,0.858362 12.29968,2.762485 l -2.50841,6.640895 C 164.5434,28.443296 162.68021,27.639533 158,27.76682 c -11.21095,0 -17.09113,8.671212 -17.11382,17.51318 0.0227,10.239742 7.28688,17.060696 16.32382,17.060696 2.63567,0 4.67493,-0.352283 6.66228,-1.499682 l 0,-10.27668 H 155.7 V 44.1 h 16 z",r="M 142,30.35 H 129.19 V 21 h 35.93 v 9.33 h -12.83 v 39.2 H 142 Z",i="m 168.65,68 c -2.3,1.15 -6.91,2.3 -12.82,2.3 -13.68,0 -24,-8.64 -24,-24.55 0,-15.19 10.3,-25.49 25.35,-25.49 6,0 9.86,1.3 11.52,2.16 l -3.53135,7.131354 c -2.57018,-1.213266 -5.82943,-1.138298 -8.52666,-0.989324 -10.11665,0.168446 -15.99219,6.764662 -16.07641,16.96797 0.16844,9.774423 4.90287,16.814862 16.71287,16.814862 2.83865,0.05714 6.66081,-0.54002 9.30355,-1.241993 z";return"G"===t?n:"A"===t?e:"C"===t?i:"T"===t?r:null},get_bbox:function(t){return"G"===t?{height:49.54718017578125,width:39.850006103515625,x:131.84999084472656,y:20.502824783325195}:"A"===t?{height:48.55999755859375,width:40.55999755859375,x:131.11000061035156,y:21}:"C"===t?{height:50.040000915527344,width:36.87001037597656,x:131.82998657226562,y:20.2600040435791}:"T"===t?{height:48.529998779296875,width:35.92999267578125,x:129.19000244140625,y:21}:null},calcPathTransform:function(t,e,n,r,i,o){var a=r(n-e),c=i,u=a/t.height,s=c/t.width,l=t.x,f=t.y,h=(o-r(n))/u,d=(-l-c/2)/s,b=l*(1-s),p=f*(1-u);return{preTX:b,preTY:p,scaleX:s,scaleY:u,postTX:d,postTY:h}}},computed:{viewBox:function(){return"0 0 ".concat(this.width," ").concat(this.height)},maxBits:function(){return Q(this.stack_bar,(function(t){return t.count_total}))},y_scale:function(){return dc().range([0,this.height-this.margin.bottom]).domain([0,this.maxBits])},x_scale:function(){return ga().domain(this.stack_bar.map((function(t,e){return e}))).range([0,this.width]).padding(.1)},stack_bar:function(){var t=this,e=Array.from(this.sequences[0]).map((function(e,n){return t.sequences.map((function(t){return t[n]}))}));return e=e.map((function(t){var e={G:0,A:0,C:0,T:0};t.forEach((function(t){"-"!=t&&(e[t]+=1)}));for(var n=Array(),r=0,i=Object.entries(e);r<i.length;r++){var o=bs(i[r],2),a=o[0],c=o[1];c>0&&n.push({letter:a,count:c})}return n.sort((function(t,e){return t.count>e.count?1:e.count>t.count?-1:0})),n})),e.forEach((function(t){var e=0;t.count=t.map((function(t){return{count:t.count,letter:t.letter,y0:e,y1:e+=t.count}})),t.count_total=t.count[t.count.length-1].y1})),e},columns:function(){var t=this;return this.stack_bar.map((function(e,n){return{x:t.x_scale(n)+t.x_scale.bandwidth()/2,bases:Array.from(e.count,(function(e){return ls(ls({},t.calcPathTransform(t.get_bbox(e.letter),e.y0,e.y1,t.y_scale,t.x_scale.bandwidth(),t.height-2*t.margin.bottom)),{},{base:e.letter})}))}}))}}};n("c6b5");const gs=Ac()(ps,[["render",cs],["__scopeId","data-v-620702a6"]]);var ms=gs,vs={name:"Solution",props:{res:Object,name:String,header:Array,reverse_bodys:Object,intervals:Array,sequences:Array,box:Object,full_sequence:String,is_corsid_a:Boolean},data:function(){return{is_show_plot:!0,is_checkall:!1,is_editing:Array(this.reverse_bodys.length).fill(!1),selectedIDX:[]}},methods:{check_all:function(){this.is_checkall?this.selectedIDX=tu(Array(this.reverse_bodys.length).keys()):this.selectedIDX=[]},modify_ORF:function(t,e){this.is_editing[t]=!0,this.$nextTick((function(){e.currentTarget.firstElementChild.focus()}))},percentage:function(t){return parseFloat(t).toFixed(2)+"%"},download:function(t){var e="";this.selectedIDX.sort();for(var n=0;n<this.selectedIDX.length;n++)if(0!=this.selectedIDX[n]&&1!=this.selectedIDX[n]){var r=this.reverse_bodys[this.selectedIDX[n]];e+=">"+r.ORF+"\n";var i=this.full_sequence.slice(r.ORF_start,r.ORF_start+r.ORF_len+3)+"\n",o=0,a=0;while(a+80*o!=i.length)a>80&&(o++,a=1,e+="\n"),e+=i.charAt(a+80*o),a++}var c=document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),c.setAttribute("download",t),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}},components:{Interval:es,SeqLogoPlot:ms}};n("2cb4");const _s=Ac()(vs,[["render",Yu],["__scopeId","data-v-7f7cc4ec"]]);var ys=_s,Os=function(t){return Object(r["x"])("data-v-6c81d2f5"),t=t(),Object(r["v"])(),t},js={class:"comparison"},ws={style:{width:"20%",float:"left"}},xs=Os((function(){return Object(r["g"])("dt",{style:{"font-weight":"bold"}},"Comparison",-1)})),As=Os((function(){return Object(r["g"])("br",null,null,-1)})),ks=Os((function(){return Object(r["g"])("dt",null,"Core sequence",-1)})),Ts=Object(r["i"])(),Cs={style:{display:"flex"}},Ss=Os((function(){return Object(r["g"])("dt",null,"Position",-1)})),Ms=Object(r["i"])(),Rs=Os((function(){return Object(r["g"])("dt",null,"TRS-L",-1)})),Fs=Object(r["i"])(),Ns=Os((function(){return Object(r["g"])("dt",null,"Total Score",-1)})),Es=Os((function(){return Object(r["g"])("dt",null,"Genome coverage",-1)})),Ds=Os((function(){return Object(r["g"])("dt",null,"Total Score",-1)})),qs=Os((function(){return Object(r["g"])("dt",null,"#ORFs",-1)})),Is=Object(r["i"])(),Gs={key:2},Ps=Object(r["i"])(),Ls=Os((function(){return Object(r["g"])("dt",null,"Range",-1)})),zs=Object(r["i"])(),Bs={style:{width:"80%",float:"right"}},Xs={class:"top_corner"},Vs={class:"close"},$s=Os((function(){return Object(r["g"])("br",null,null,-1)})),Hs={key:0,class:"svg"},Ys=["id"],Us=["id"],Js={class:"aligned"},Ks={class:"aligned"};function Ws(t,e,n,i,o,a){var c=Object(r["B"])("Interval"),u=Object(r["B"])("SeqLogoPlot");return Object(r["u"])(),Object(r["f"])("div",js,[Object(r["g"])("div",ws,[xs,As,ks,Ts,Object(r["g"])("dd",null,[Object(r["g"])("div",Cs,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.res[1].leader_core_seq,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))])]),Ss,Ms,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].leader_core_start+1),1),Rs,Fs,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].TRS_L_start+1)+" - "+Object(r["D"])(n.res[1].TRS_L_start+n.res[1].TRS_L_len+1),1),n.is_corsid_a?(Object(r["u"])(),Object(r["f"])(r["a"],{key:0},[Ns,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].weight),1)],64)):(Object(r["u"])(),Object(r["f"])(r["a"],{key:1},[Es,Object(r["g"])("dd",null,Object(r["D"])(a.percentage(100*(1-n.res[1].compact))),1),Ds,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].bodys.reduce((function(t,e){return+t+(+e.score||0)}),0)),1)],64)),qs,Is,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].n_intervals),1),n.res[1].missing_ORF.length?(Object(r["u"])(),Object(r["f"])("dt",Gs,"Missing ORFs")):Object(r["e"])("",!0),Ps,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].missing_ORF.join(", ")),1),Ls,zs,Object(r["g"])("dd",null,Object(r["D"])(n.res[1].body_range_start)+" - "+Object(r["D"])(n.res[1].body_range_start+n.res[1].body_range_len),1)]),Object(r["g"])("div",Bs,[Object(r["g"])("span",Xs,[Object(r["g"])("span",Vs,[Object(r["g"])("i",{class:"fas fa-times",onClick:e[0]||(e[0]=function(e){return t.$emit("remove-comparison")})})])]),$s,t.is_show_plot?(Object(r["u"])(),Object(r["f"])("div",Hs,[Object(r["g"])("div",{id:n.name+"-"+n.res[0]+"-interval"},[Object(r["j"])(c,{id:n.name+"-"+n.res[0]+"-interval",start:0,intervals:n.intervals},null,8,["id","intervals"])],8,Ys),Object(r["g"])("div",{id:n.name+"-"+n.res[0]+"-logo"},[Object(r["j"])(u,{id:n.name+"-"+n.res[0]+"-seq",sequences:n.sequences,box:n.box},null,8,["id","sequences","box"])],8,Us)])):Object(r["e"])("",!0)]),Object(r["g"])("table",null,[Object(r["g"])("thead",null,[Object(r["g"])("tr",null,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.header,(function(t){return Object(r["u"])(),Object(r["f"])("th",{key:t,style:{"text-align":"center"}},Object(r["D"])(t),1)})),128)),Object(r["g"])("th",Js,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.res[1].TRS_L_seq,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))])])]),Object(r["g"])("tbody",null,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(n.reverse_bodys,(function(t){var e;return Object(r["u"])(),Object(r["f"])("tr",{key:t.ORF_start},[Object(r["g"])("td",null,Object(r["D"])(t.ORF),1),Object(r["g"])("td",null,Object(r["D"])(t.score),1),Object(r["g"])("td",null,Object(r["D"])(null!==t.core_start?t.core_start+1:""),1),Object(r["g"])("td",null,Object(r["D"])(null!==t.core_start?t.core_start+t.core_len+1:""),1),Object(r["g"])("td",null,Object(r["D"])(null!==(e=t.core_len)&&void 0!==e?e:""),1),Object(r["g"])("td",null,Object(r["D"])(t.ORF_start+1),1),Object(r["g"])("td",null,Object(r["D"])(t.ORF_start+t.ORF_len+1),1),Object(r["g"])("td",null,Object(r["D"])(t.ORF_len),1),Object(r["g"])("td",Ks,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(t.align,(function(t,e){return Object(r["u"])(),Object(r["f"])("span",{key:e,class:Object(r["p"])({A:"A"==t,T:"T"==t,C:"C"==t,G:"G"==t})},Object(r["D"])(t),3)})),128))])])})),128))])])])}var Zs={name:"Comparison",props:{res:Object,name:String,header:Array,reverse_bodys:Object,intervals:Array,sequences:Array,box:Object,is_corsid_a:Boolean},data:function(){return{is_show_plot:!0}},methods:{percentage:function(t){return parseFloat(t).toFixed(2)+"%"}},components:{Interval:es,SeqLogoPlot:ms}};n("d68c");const Qs=Ac()(Zs,[["render",Ws],["__scopeId","data-v-6c81d2f5"]]);var tl=Qs,el={class:"container"},nl={key:0,class:"fas fa-exclamation-triangle"};function rl(t,e,n,i,o,a){return Object(r["u"])(),Object(r["f"])("div",el,[n.message.length>0?(Object(r["u"])(),Object(r["f"])("div",{key:0,class:Object(r["p"])([n.style,i.hide_state?"hidden":""])},["warning"==n.style?(Object(r["u"])(),Object(r["f"])("i",nl)):Object(r["e"])("",!0),Object(r["i"])(" "+Object(r["D"])(n.message),1)],2)):Object(r["e"])("",!0)])}var il=n("a1e9"),ol=n("5c40"),al={name:"Alert",props:{message:String,style:{type:String,default:"primary"},duration:{type:Number,default:2}},setup:function(t){var e=Object(il["l"])(!1),n=0;return Object(ol["S"])((function(){return t.message}),(function(){e.value=!1,n>0&&clearTimeout(n),n=setTimeout((function(){e.value=!0}),2e3)})),{hide_state:e}}};n("4d6c");const cl=Ac()(al,[["render",rl],["__scopeId","data-v-54f3675c"]]);var ul=cl,sl={name:"Viz",data:function(){return{staticIdx:0,header:["ORF","Score","TRS start","TRS end","TRS len","ORF start","ORF end","ORF len"],json:{results:[{leader_core_start:69,leader_core_len:7,leader_core_seq:"ACGAACT",TRS_L_start:64,TRS_L_len:19,body_range_start:21352,body_range_len:8551,n_intervals:7,weight:7518.069,compact:.11998596655361946,bodys:[{ORF:"N",interval_start:28273,interval_len:1258,weight:1257.009,core_start:28254,core_len:12,leader_start:64,leader_end:75,ORF_start:28273,ORF_len:1257,score:9,index:34,align:"TCTAAACGAACA-------"},{ORF:"8",interval_start:27893,interval_len:364,weight:363.01,core_start:27883,core_len:16,leader_start:65,leader_end:80,ORF_start:27893,ORF_len:363,score:10,index:30,align:"-CTAAACGAACATGAAA--"},{ORF:"7a",interval_start:27393,interval_len:364,weight:363.011,core_start:27384,core_len:17,leader_start:66,leader_end:82,ORF_start:27393,ORF_len:363,score:11,index:21,align:"--TAAACGAACATGAAAAT"},{ORF:"M",interval_start:26522,interval_len:667,weight:666.012,core_start:26467,core_len:12,leader_start:64,leader_end:75,ORF_start:26522,ORF_len:666,score:12,index:8,align:"TCTAAACGAACT-------"},{ORF:"E",interval_start:26244,interval_len:226,weight:225.008,core_start:26236,core_len:8,leader_start:69,leader_end:76,ORF_start:26244,ORF_len:225,score:8,index:7,align:"-----ACGAACTT------"},{ORF:"3a",interval_start:25392,interval_len:826,weight:825.011,core_start:25381,core_len:11,leader_start:66,leader_end:76,ORF_start:25392,ORF_len:825,score:11,index:3,align:"--TAAACGAACTT------"},{ORF:"S",interval_start:21562,interval_len:3820,weight:3819.008,core_start:21551,core_len:11,leader_start:65,leader_end:75,ORF_start:21562,ORF_len:3819,score:8,index:0,align:"-CTAAACGAACA-------"}],total_ORF:["8","7a","7b","M","3a","10","N","E","S","6"],recall_ORF:["8","7a","M","3a","N","E","S"],missing_ORF:["10","7b","6"],TRS_L_seq:"TCTAAACGAACTTTAAAAT"}],name:"Upload a JSON file",description:"CORSID Viz",genbank:{},ORF1ab:[],sequence:"ATTAAAGGTTTATACCTTCCCAGGTAACAAACCAACCAACTTTCGATCTCTTGTAGATCTGTTCTCTAAACGAACTTTAAAATCTGTGTGGCTGTCACTCGGCTGCATGCTTAGTGCACTCACGCAGTATAATTAATAACTAATTACTGTCGTTGACAGGACACGAGTAACTCGTCTATCTTCTGCAGGCTGCTTACGGTTTCGTCCGTGTTG"},solutions_shown:[],alert_message:"",show_upload_dialog:!1}},created:function(){var t=this;this.$route.params["data_url"]?(console.log(this.$route.params["data_url"]),fetch(this.$route.params["data_url"]).then((function(t){return t.json()})).then((function(e){return t.json=e}))):(console.log("No url"),this.show_upload_dialog=!0)},methods:{add_solution:function(t){this.solutions_shown=this.solutions_shown.filter((function(e){return e[0]!==t[0]})),this.solutions_shown.unshift(t)},write_to_json:function(t){var e=t[0],n=t[1],r=t[3],i=this.json.results[e].bodys.length,o=t[2];if(n>1)for(var a=0;a<i;a++)r==this.json.results[e].bodys[a].ORF_start&&(this.json.results[e].bodys[a].ORF=o)},show_as_compare:function(t){this.staticIdx=t-1},remove_solution:function(t){this.solutions_shown=this.solutions_shown.filter((function(e){return e[0]!=t}))},remove_comparison:function(){this.staticIdx=-1},move_down:function(t){var e=this.solutions_shown.indexOf(t);if(e<this.solutions_shown.length-1&&-1!=e){var n=this.solutions_shown[e+1];this.solutions_shown[e+1]=this.solutions_shown[e],this.solutions_shown[e]=n}},move_up:function(t){var e=this.solutions_shown.indexOf(t);if(e>0&&-1!=e){var n=this.solutions_shown[e];this.solutions_shown[e]=this.solutions_shown[e-1],this.solutions_shown[e-1]=n}},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;1==e.length?this.readFile(e[0]):console.log("Did not receive single file")},readFile:function(t){var e=this,n=new FileReader;n.onload=function(t){try{e.result=JSON.parse(t.target.result)}catch(t){alert(t)}},n.readAsText(t)},show_modal:function(){this.show_upload_dialog=!0},close_modal:function(){this.show_upload_dialog=!1},update_json:function(){return!!this.result&&(this.json=this.result,!0)}},computed:{boxes:function(){return Array.from(this.json.results,(function(t){var e=t.TRS_L_start,n=t.leader_core_start,r=t.leader_core_len;return{start:n-e,len:r,TRS_L_start:e+1}}))},intervals:function(){return Array.from(this.json.results,(function(t){var e=t.bodys;return Array.from(e,(function(t,e){var n=t.ORF,r=t.ORF_start,i=t.ORF_len;return{id:e,name:n,start:r+1,end:r+1+i}})).reverse()}))},reverse_bodys:function(){var t=this;return Array.from(this.json.results,(function(e){var n=e.bodys;return[{check:null,ORF:"1a",score:null,core_start:null,core_len:null,ORF_start:t.json.ORF1ab[0],ORF_len:t.json.ORF1ab[1]-t.json.ORF1ab[0]},{check:null,ORF:"1b",score:null,core_start:null,core_len:null,ORF_start:t.json.ORF1ab[2],ORF_len:t.json.ORF1ab[3]-t.json.ORF1ab[2]}].concat(n.slice().reverse())}))},sequences:function(){return Array.from(this.json.results,(function(t){var e=t.bodys;return Array.from(e,(function(t){var e=t.align;return e}))}))},summary_data:function(){var t=this;return Array.from(this.json.results,(function(e,n){var r=e.leader_core_seq,i=e.leader_core_start,o=e.TRS_L_start,a=e.TRS_L_len,c=e.weight,u=e.compact,s=e.bodys;return{idx:n+1,sample:t.json.name,core_seq:r,pos:i+1,trs_l_start:o+1,trs_l_end:o+a+1,weight:c,score:s.reduce((function(t,e){return+t+(+e.score||0)}),0),min_score:s.reduce((function(t,e){return Math.min(t,e.score||1/0)}),1/0),compact:100*(1-u)}}))}},components:{Summary:au,Solution:ys,Comparison:tl,Alert:ul}};n("13ce");const ll=Ac()(sl,[["render",g],["__scopeId","data-v-3daf3e40"]]);e["default"]=ll},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),c=a((function(){o(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(t){return o(i(t))}})},b680:function(t,e,n){"use strict";var r=n("23e7"),i=n("5926"),o=n("408a"),a=n("1148"),c=n("d039"),u=1..toFixed,s=Math.floor,l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},h=function(t,e,n){var r=-1,i=n;while(++r<6)i+=e*t[r],t[r]=i%1e7,i=s(i/1e7)},d=function(t,e){var n=6,r=0;while(--n>=0)r+=t[n],t[n]=s(r/e),r=r%e*1e7},b=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var r=String(t[e]);n=""===n?r:n+a.call("0",7-r.length)+r}return n},p=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){u.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,n,r,c,u=o(this),s=i(t),p=[0,0,0,0,0,0],g="",m="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(e=f(u*l(2,69,1))-69,n=e<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,e=52-e,e>0){h(p,0,n),r=s;while(r>=7)h(p,1e7,0),r-=7;h(p,l(10,r,1),0),r=e-1;while(r>=23)d(p,1<<23),r-=23;d(p,1<<r),h(p,1,1),d(p,2),m=b(p)}else h(p,0,n),h(p,1<<-e,0),m=b(p)+a.call("0",s);return s>0?(c=m.length,m=g+(c<=s?"0."+a.call("0",s-c)+m:m.slice(0,c-s)+"."+m.slice(c-s))):m=g+m,m}})},c6b5:function(t,e,n){"use strict";n("220b")},c740:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").findIndex,o=n("44d2"),a="findIndex",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},cb29:function(t,e,n){var r=n("23e7"),i=n("81d5"),o=n("44d2");r({target:"Array",proto:!0},{fill:i}),o("fill")},cd21:function(t,e,n){"use strict";n("d2d9")},d2d9:function(t,e,n){},d68c:function(t,e,n){"use strict";n("2a2e")},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=o("map");r({target:"Array",proto:!0,forced:!a},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),a=n("fc6a"),c=n("06cf"),u=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=c.f,s=o(r),l={},f=0;while(s.length>f)n=i(r,e=s[f++]),void 0!==n&&u(l,e,n);return l}})},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),a=n("06cf").f,c=n("83ab"),u=i((function(){a(1)})),s=!c||u;r({target:"Object",stat:!0,forced:s,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},ee9b:function(t,e,n){"use strict";n("139b")}}]);
//# sourceMappingURL=chunk-2b9e859a.83a8e537.js.map